import{e as Q,$ as V,aL as X,N as h,a2 as L,T as Y,I as $,b as tt,j as et,O as ot,as as it}from"./index-DqzYUymv.js";function st(i,t,e){e=e||{};var n=i.coordinateSystem,r=t.axis,o={},p=r.getAxesOnZeroOf()[0],a=r.position,x=p?"onZero":a,u=r.dim,s=n.getRect(),g=[s.x,s.x+s.width,s.y,s.y+s.height],d={left:0,right:1,top:0,bottom:1,onZero:2},c=t.get("offset")||0,l=u==="x"?[g[2]-c,g[3]+c]:[g[0]-c,g[1]+c];if(p){var A=p.toGlobalCoord(p.dataToCoord(0));l[d.onZero]=Math.max(Math.min(A,l[1]),l[0])}o.position=[u==="y"?l[d[x]]:g[0],u==="x"?l[d[x]]:g[3]],o.rotation=Math.PI/2*(u==="x"?0:1),o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[a],o.labelOffset=p?l[d[a]]-l[d.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),X(e.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var C=t.get(["axisLabel","rotate"]);return o.labelRotate=x==="top"?-C:C,o.z2=1,o}function rt(i){return i.get("coordinateSystem")==="cartesian2d"}function at(i){var t={xAxisModel:null,yAxisModel:null};return h(t,function(e,n){var r=n.replace(/Model$/,""),o=i.getReferringComponents(r,it).models[0];t[n]=o}),t}function lt(i,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(n,r,o){var p=r.getComponent("tooltip"),a=r.getComponent("axisPointer"),x=a.get("link",!0)||[],u=[];h(o.getCoordinateSystems(),function(s){if(s.axisPointerEnabled){var g=U(s.model),d=n.coordSysAxesInfo[g]={};n.coordSysMap[g]=s;var c=s.model.getModel("tooltip",p);if(h(s.getAxes(),L(E,!1,null)),s.getTooltipAxes&&p&&c.get("show")){var l=c.get("trigger")==="axis",A=c.get(["axisPointer","type"])==="cross",C=s.getTooltipAxes(c.get(["axisPointer","axis"]));(l||A)&&h(C.baseAxes,L(E,!A||"cross",l)),A&&h(C.otherAxes,L(E,"cross",!1))}}function E(Z,I,y){var f=y.model.getModel("axisPointer",a),B=f.get("show");if(B&&(B!=="auto"||Z||z(f))){I==null&&(I=f.get("triggerTooltip")),f=Z?function(S,_,b,w,m,P){var k=_.getModel("axisPointer"),v={};h(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(q){v[q]=Y(k.get(q))}),v.snap=S.type!=="category"&&!!P,k.get("type")==="cross"&&(v.type="line");var T=v.label||(v.label={});if(T.show==null&&(T.show=!1),m==="cross"){var H=k.get(["label","show"]);if(T.show=H==null||H,!P){var W=v.lineStyle=k.get("crossStyle");W&&$(T,W.textStyle)}}return S.model.getModel("axisPointer",new tt(v,b,w))}(y,c,a,r,Z,I):f;var N=f.get("snap"),K=f.get("triggerEmphasis"),M=U(y.model),j=I||N||y.type==="category",O=n.axesInfo[M]={key:M,axis:y,coordSys:s,axisPointerModel:f,triggerTooltip:I,triggerEmphasis:K,involveSeries:j,snap:N,useHandle:z(f),seriesModels:[],linkGroup:null};d[M]=O,n.seriesInvolved=n.seriesInvolved||j;var D=function(S,_){for(var b=_.model,w=_.dim,m=0;m<S.length;m++){var P=S[m]||{};if(R(P[w+"AxisId"],b.id)||R(P[w+"AxisIndex"],b.componentIndex)||R(P[w+"AxisName"],b.name))return m}}(x,y);if(D!=null){var G=u[D]||(u[D]={axesInfo:{}});G.axesInfo[M]=O,G.mapper=x[D].mapper,O.linkGroup=G}}}})}(e,i,t),e.seriesInvolved&&function(n,r){r.eachSeries(function(o){var p=o.coordinateSystem,a=o.get(["tooltip","trigger"],!0),x=o.get(["tooltip","show"],!0);p&&a!=="none"&&a!==!1&&a!=="item"&&x!==!1&&o.get(["axisPointer","show"],!0)!==!1&&h(n.coordSysAxesInfo[U(p.model)],function(u){var s=u.axis;p.getAxis(s.dim)===s&&(u.seriesModels.push(o),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=o.getData().count())})})}(e,i),e}function R(i,t){return i==="all"||et(i)&&ot(i,t)>=0||i===t}function F(i){var t=(i.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[U(i)]}function z(i){return!!i.get(["handle","show"])}function U(i){return i.type+"||"+i.id}var J={},pt=function(i){function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return Q(t,i),t.prototype.render=function(e,n,r,o){this.axisPointerClass&&function(p){var a=F(p);if(a){var x=a.axisPointerModel,u=a.axis.scale,s=x.option,g=x.get("status"),d=x.get("value");d!=null&&(d=u.parse(d));var c=z(x);g==null&&(s.status=c?"show":"hide");var l=u.getExtent().slice();l[0]>l[1]&&l.reverse(),(d==null||d>l[1])&&(d=l[1]),d<l[0]&&(d=l[0]),s.value=d,c&&(s.status=a.axis.scale.isBlank()?"hide":"show")}}(e),i.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,r,!0)},t.prototype.updateAxisPointer=function(e,n,r,o){this._doUpdateAxisPointerClass(e,r,!1)},t.prototype.remove=function(e,n){var r=this._axisPointer;r&&r.remove(n)},t.prototype.dispose=function(e,n){this._disposeAxisPointer(n),i.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,n,r){var o=t.getAxisPointerClass(this.axisPointerClass);if(o){var p=function(a){var x=F(a);return x&&x.axisPointerModel}(e);p?(this._axisPointer||(this._axisPointer=new o)).render(e,p,n,r):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,n){J[e]=n},t.getAxisPointerClass=function(e){return e&&J[e]},t.type="axis",t}(V);export{pt as P,at as c,lt as g,rt as u,F as v,st as x,U as y};
