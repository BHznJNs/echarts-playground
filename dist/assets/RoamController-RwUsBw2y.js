import{e as d,cK as c,Q as g,cE as M,H as u,G as b,I as y,T as w}from"./index-B7CpzWKR.js";import{o as m}from"./interactionMutex-DyFWCbR8.js";function v(r,i,o,e,n){r.pointerChecker&&r.pointerChecker(e,n.originX,n.originY)&&(g(e.event),_(r,i,o,e,n))}function _(r,i,o,e,n){n.isAvailableBehavior=u(p,null,o,e),r.trigger(i,n)}function p(r,i,o){var e=o[r];return!r||e&&(!b(e)||i.event[e+"Key"])}var Y=function(r){function i(o){var e=r.call(this)||this;e._zr=o;var n=u(e._mousedownHandler,e),t=u(e._mousemoveHandler,e),a=u(e._mouseupHandler,e),l=u(e._mousewheelHandler,e),h=u(e._pinchHandler,e);return e.enable=function(s,f){this.disable(),this._opt=y(w(f)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),s==null&&(s=!0),s!==!0&&s!=="move"&&s!=="pan"||(o.on("mousedown",n),o.on("mousemove",t),o.on("mouseup",a)),s!==!0&&s!=="scale"&&s!=="zoom"||(o.on("mousewheel",l),o.on("pinch",h))},e.disable=function(){o.off("mousedown",n),o.off("mousemove",t),o.off("mouseup",a),o.off("mousewheel",l),o.off("pinch",h)},e}return d(i,r),i.prototype.isDragging=function(){return this._dragging},i.prototype.isPinching=function(){return this._pinching},i.prototype.setPointerChecker=function(o){this.pointerChecker=o},i.prototype.dispose=function(){this.disable()},i.prototype._mousedownHandler=function(o){if(!c(o)){for(var e=o.target;e;){if(e.draggable)return;e=e.__hostTarget||e.parent}var n=o.offsetX,t=o.offsetY;this.pointerChecker&&this.pointerChecker(o,n,t)&&(this._x=n,this._y=t,this._dragging=!0)}},i.prototype._mousemoveHandler=function(o){if(this._dragging&&p("moveOnMouseMove",o,this._opt)&&o.gestureEvent!=="pinch"&&!m(this._zr,"globalPan")){var e=o.offsetX,n=o.offsetY,t=this._x,a=this._y,l=e-t,h=n-a;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&g(o.event),_(this,"pan","moveOnMouseMove",o,{dx:l,dy:h,oldX:t,oldY:a,newX:e,newY:n,isAvailableBehavior:null})}},i.prototype._mouseupHandler=function(o){c(o)||(this._dragging=!1)},i.prototype._mousewheelHandler=function(o){var e=p("zoomOnMouseWheel",o,this._opt),n=p("moveOnMouseWheel",o,this._opt),t=o.wheelDelta,a=Math.abs(t),l=o.offsetX,h=o.offsetY;if(t!==0&&(e||n)){if(e){var s=a>3?1.4:a>1?1.2:1.1;v(this,"zoom","zoomOnMouseWheel",o,{scale:t>0?s:1/s,originX:l,originY:h,isAvailableBehavior:null})}if(n){var f=Math.abs(t);v(this,"scrollMove","moveOnMouseWheel",o,{scrollDelta:(t>0?1:-1)*(f>3?.4:f>1?.15:.05),originX:l,originY:h,isAvailableBehavior:null})}}},i.prototype._pinchHandler=function(o){m(this._zr,"globalPan")||v(this,"zoom",null,o,{scale:o.pinchScale>1?1.1:1/1.1,originX:o.pinchX,originY:o.pinchY,isAvailableBehavior:null})},i}(M);export{Y as f};
