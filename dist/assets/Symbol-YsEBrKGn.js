import{e as w,L,a_ as C,a$ as F,ab as E,bM as N,bL as R,bR as P,aU as Z,ah as $,D as T,al as k,bT as B,a8 as K,d9 as X,aT as Q,A as U}from"./index-CfHuJ7al.js";import{r as j}from"./labelHelper-CoUP5mfK.js";var J=function(g){function a(t,s,i,e){var o=g.call(this)||this;return o.updateData(t,s,i,e),o}return w(a,g),a.prototype._createSymbol=function(t,s,i,e,o){this.removeAll();var r=L(t,-1,-1,2,2,null,o);r.attr({z2:100,culling:!0,scaleX:e[0]/2,scaleY:e[1]/2}),r.drift=q,this._symbolType=t,this.add(r)},a.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},a.prototype.getSymbolType=function(){return this._symbolType},a.prototype.getSymbolPath=function(){return this.childAt(0)},a.prototype.highlight=function(){C(this.childAt(0))},a.prototype.downplay=function(){F(this.childAt(0))},a.prototype.setZ=function(t,s){var i=this.childAt(0);i.zlevel=t,i.z=s},a.prototype.setDraggable=function(t,s){var i=this.childAt(0);i.draggable=t,i.cursor=!s&&t?"move":i.cursor},a.prototype.updateData=function(t,s,i,e){this.silent=!1;var o=t.getItemVisual(s,"symbol")||"circle",r=t.hostModel,c=a.getSymbolSize(t,s),m=o!==this._symbolType,y=e&&e.disableAnimation;if(m){var p=t.getItemVisual(s,"symbolKeepAspect");this._createSymbol(o,t,s,c,p)}else{(n=this.childAt(0)).silent=!1;var h={scaleX:c[0]/2,scaleY:c[1]/2};y?n.attr(h):E(n,h,r,s),N(n)}if(this._updateCommon(t,s,c,i,e),m){var n=this.childAt(0);y||(h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:n.style.opacity}},n.scaleX=n.scaleY=0,n.style.opacity=0,R(n,h,r,s))}y&&this.childAt(0).stopAnimation("leave")},a.prototype._updateCommon=function(t,s,i,e,o){var r,c,m,y,p,h,n,u,v,l=this.childAt(0),V=t.hostModel;if(e&&(r=e.emphasisItemStyle,c=e.blurItemStyle,m=e.selectItemStyle,y=e.focus,p=e.blurScope,n=e.labelStatesModels,u=e.hoverScale,v=e.cursorStyle,h=e.emphasisDisabled),!e||t.hasItemOption){var d=e&&e.itemModel?e.itemModel:t.getItemModel(s),b=d.getModel("emphasis");r=b.getModel("itemStyle").getItemStyle(),m=d.getModel(["select","itemStyle"]).getItemStyle(),c=d.getModel(["blur","itemStyle"]).getItemStyle(),y=b.get("focus"),p=b.get("blurScope"),h=b.get("disabled"),n=P(d),u=b.getShallow("scale"),v=d.getShallow("cursor")}var D=t.getItemVisual(s,"symbolRotate");l.attr("rotation",(D||0)*Math.PI/180||0);var I=Z(t.getItemVisual(s,"symbolOffset"),i);I&&(l.x=I[0],l.y=I[1]),v&&l.attr("cursor",v);var f=t.getItemVisual(s,"style"),z=f.fill;if(l instanceof $){var S=l.style;l.useStyle(T({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},f))}else l.__isEmptyBrush?l.useStyle(T({},f)):l.useStyle(f),l.style.decal=null,l.setColor(z,o&&o.symbolInnerColor),l.style.strokeNoScale=!0;var A=t.getItemVisual(s,"liftZ"),_=this._z2;A!=null?_==null&&(this._z2=l.z2,l.z2+=A):_!=null&&(l.z2=_,this._z2=null);var O=o&&o.useNameLabel;k(l,n,{labelFetcher:V,labelDataIndex:s,defaultText:function(Y){return O?t.getName(Y):j(t,Y)},inheritColor:z,defaultOpacity:f.opacity}),this._sizeX=i[0]/2,this._sizeY=i[1]/2;var x=l.ensureState("emphasis");x.style=r,l.ensureState("select").style=m,l.ensureState("blur").style=c;var M=u==null||u===!0?Math.max(1.1,3/this._sizeY):isFinite(u)&&u>0?+u:1;x.scaleX=this._sizeX*M,x.scaleY=this._sizeY*M,this.setSymbolScale(1),B(this,y,p,h)},a.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},a.prototype.fadeOut=function(t,s,i){var e=this.childAt(0),o=K(this).dataIndex,r=i&&i.animation;if(this.silent=e.silent=!0,i&&i.fadeLabel){var c=e.getTextContent();c&&X(c,{style:{opacity:0}},s,{dataIndex:o,removeOpt:r,cb:function(){e.removeTextContent()}})}else e.removeTextContent();X(e,{style:{opacity:0},scaleX:0,scaleY:0},s,{dataIndex:o,cb:t,removeOpt:r})},a.getSymbolSize=function(t,s){return Q(t.getItemVisual(s,"symbolSize"))},a}(U);function q(g,a){this.parent.drift(g,a)}export{J as b};
