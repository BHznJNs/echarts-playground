import{O as v,G as y,j as m,a6 as D,d8 as T,aN as w,U as A}from"./index-B7p1rSoh.js";import{d as B}from"./linkSeriesData-DMzrFD1S.js";function _(n,t,e){if(n&&v(t,n.type)>=0){var o=e.getData().tree.root,r=n.targetNode;if(y(r)&&(r=o.getNodeById(r)),r&&o.contains(r))return{node:r};var a=n.targetNodeId;if(a!=null&&(r=o.getNodeById(a)))return{node:r}}}function L(n){for(var t=[];n;)(n=n.parentNode)&&t.push(n);return t.reverse()}function O(n,t){var e=L(n);return v(e,t)>=0}function C(n,t){for(var e=[];n;){var o=n.dataIndex;e.push({name:n.name,dataIndex:o,value:t.getRawValue(o)}),n=n.parentNode}return e.reverse(),e}var M=function(){function n(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(t,e,o){A(t)&&(o=e,e=t,t=null),y(t=t||{})&&(t={order:t});var r,a=t.order||"preorder",i=this[t.attr||"children"];a==="preorder"&&(r=e.call(o,this));for(var d=0;!r&&d<i.length;d++)i[d].eachNode(t,e,o);a==="postorder"&&e.call(o,this)},n.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var o=0;o<this.children.length;o++){var r=this.children[o];r.updateDepthAndHeight(t+1),r.height>e&&(e=r.height)}this.height=e+1},n.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,o=this.children,r=o.length;e<r;e++){var a=o[e].getNodeById(t);if(a)return a}},n.prototype.contains=function(t){if(t===this)return!0;for(var e=0,o=this.children,r=o.length;e<r;e++){var a=o[e].contains(t);if(a)return a}},n.prototype.getAncestors=function(t){for(var e=[],o=t?this:this.parentNode;o;)e.push(o),o=o.parentNode;return e.reverse(),e},n.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},n.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},n.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},n.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},n.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},n.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},n.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},n}(),H=function(){function n(t){this.type="tree",this._nodes=[],this.hostModel=t}return n.prototype.eachNode=function(t,e,o){this.root.eachNode(t,e,o)},n.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},n.prototype.getNodeById=function(t){return this.root.getNodeById(t)},n.prototype.update=function(){for(var t=this.data,e=this._nodes,o=0,r=e.length;o<r;o++)e[o].dataIndex=-1;for(o=0,r=t.count();o<r;o++)e[t.getRawIndex(o)].dataIndex=o},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(t,e,o){var r=new n(e),a=[],i=1;(function x(s,l){var I=s.value;i=Math.max(i,m(I)?I.length:1),a.push(s);var h=new M(D(s.name,""),r);l?function(f,g){var N=g.children;f.parentNode!==g&&(N.push(f),f.parentNode=g)}(h,l):r.root=h,r._nodes.push(h);var p=s.children;if(p)for(var c=0;c<p.length;c++)x(p[c],h)})(t),r.root.updateDepthAndHeight(0);var d=T(a,{coordDimensions:["value"],dimensionsCount:i}).dimensions,u=new w(d,e);return u.initData(a),o&&o(u),B({mainData:u,struct:r,structAttr:"tree"}),r.update(),r},n}();export{_ as d,H as f,L as h,C as p,O as u};
