import{e as A,bI as F,as as H,bL as R,bO as j,bU as C,aw as U,bT as Y,bS as X,E as Z,O as q,j as J,h as V,bv as K,bp as $,M as ee,bY as Q,U as te,G as ae,N as oe}from"./index-B3HKDY-B.js";import{r as ne}from"./whiskerBoxCommon-Btr7apwD.js";import"./createSeriesDataSimply-BtvIqVi0.js";var z=function(n){function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return A(a,n),a.type="series.boxplot",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},a}(F);H(z,ne,!0);var ie=z,re=function(n){function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t}return A(a,n),a.prototype.render=function(t,i,o){var e=t.getData(),r=this.group,s=this._data;this._data||r.removeAll();var v=t.get("layout")==="horizontal"?1:0;e.diff(s).add(function(l){if(e.hasValue(l)){var u=_(e.getItemLayout(l),e,l,v,!0);e.setItemGraphicEl(l,u),r.add(u)}}).update(function(l,u){var p=s.getItemGraphicEl(u);if(e.hasValue(l)){var h=e.getItemLayout(l);p?(R(p),k(h,p,e,l)):p=_(h,e,l,v),r.add(p),e.setItemGraphicEl(l,p)}else r.remove(p)}).remove(function(l){var u=s.getItemGraphicEl(l);u&&r.remove(u)}).execute(),this._data=e},a.prototype.remove=function(t){var i=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(e){e&&i.remove(e)})},a.type="boxplot",a}(j),se=function(){},ue=function(n){function a(t){var i=n.call(this,t)||this;return i.type="boxplotBoxPath",i}return A(a,n),a.prototype.getDefaultShape=function(){return new se},a.prototype.buildPath=function(t,i){var o=i.points,e=0;for(t.moveTo(o[e][0],o[e][1]),e++;e<4;e++)t.lineTo(o[e][0],o[e][1]);for(t.closePath();e<o.length;e++)t.moveTo(o[e][0],o[e][1]),e++,t.lineTo(o[e][0],o[e][1])},a}(C);function _(n,a,t,i,o){var e=n.ends,r=new ue({shape:{points:o?le(e,i,n):e}});return k(n,r,a,t,o),r}function k(n,a,t,i,o){var e=t.hostModel;(0,U[o?"initProps":"updateProps"])(a,{shape:{points:n.ends}},e,i),a.useStyle(t.getItemVisual(i,"style")),a.style.strokeNoScale=!0,a.z2=100;var r=t.getItemModel(i),s=r.getModel("emphasis");Y(a,r),X(a,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function le(n,a,t){return Z(n,function(i){return(i=i.slice())[a]=t.initBaseline,i})}var pe=re,B=oe;function he(n){var a=function(t){var i=[],o=[];return t.eachSeriesByType("boxplot",function(e){var r=e.getBaseAxis(),s=q(o,r);s<0&&(s=o.length,o[s]=r,i[s]={axis:r,seriesModels:[]}),i[s].seriesModels.push(e)}),i}(n);B(a,function(t){var i=t.seriesModels;i.length&&(function(o){var e,r=o.axis,s=o.seriesModels,v=s.length,l=o.boxWidthList=[],u=o.boxOffsetList=[],p=[];if(r.type==="category")e=r.getBandWidth();else{var h=0;B(s,function(m){h=Math.max(h,m.getData().count())});var g=r.getExtent();e=Math.abs(g[1]-g[0])/h}B(s,function(m){var c=m.get("boxWidth");J(c)||(c=[c,c]),p.push([V(c[0],e)||0,V(c[1],e)||0])});var x=.8*e-2,y=x/v*.3,d=(x-y*(v-1))/v,f=d/2-x/2;B(s,function(m,c){u.push(f),f+=y+d,l.push(Math.min(Math.max(d,p[c][0]),p[c][1]))})}(t),B(i,function(o,e){(function(r,s,v){var l=r.coordinateSystem,u=r.getData(),p=v/2,h=r.get("layout")==="horizontal"?0:1,g=1-h,x=["x","y"],y=u.mapDimension(x[h]),d=u.mapDimensionsAll(x[g]);if(y==null||d.length<5)return;for(var f=0;f<u.count();f++){var m=u.get(y,f),c=E(m,d[2],f),S=E(m,d[0],f),D=E(m,d[1],f),I=E(m,d[3],f),W=E(m,d[4],f),T=[];G(T,D,!1),G(T,I,!0),T.push(S,D,W,I),O(T,S),O(T,W),O(T,c),u.setItemLayout(f,{initBaseline:c[g],ends:T})}function E(M,N,w){var b,L=u.get(N,w),P=[];return P[h]=M,P[g]=L,isNaN(M)||isNaN(L)?b=[NaN,NaN]:(b=l.dataToPoint(P))[h]+=s,b}function G(M,N,w){var b=N.slice(),L=N.slice();b[h]+=p,L[h]-=p,w?M.push(b,L):M.push(L,b)}function O(M,N){var w=N.slice(),b=N.slice();w[h]-=p,b[h]+=p,M.push(w,b)}})(o,t.boxOffsetList[e],t.boxWidthList[e])}))})}var ce={type:"echarts:boxplot",transform:function(n){var a=n.upstream;a.sourceFormat!==K&&$("");var t=function(i,o){for(var e=[],r=[],s=(o=o||{}).boundIQR,v=s==="none"||s===0,l=0;l<i.length;l++){var u=ee(i[l].slice()),p=Q(u,.25),h=Q(u,.5),g=Q(u,.75),x=u[0],y=u[u.length-1],d=(s??1.5)*(g-p),f=v?x:Math.max(x,p-d),m=v?y:Math.min(y,g+d),c=o.itemNameFormatter,S=te(c)?c({value:l}):ae(c)?c.replace("{value}",l+""):l+"";e.push([S,f,p,h,g,m]);for(var D=0;D<u.length;D++){var I=u[D];if(I<f||I>m){var W=[S,I];r.push(W)}}}return{boxData:e,outliers:r}}(a.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:t.boxData},{data:t.outliers}]}};function ve(n){n.registerSeriesModel(ie),n.registerChartView(pe),n.registerLayout(he),n.registerTransform(ce)}export{ve as install};
