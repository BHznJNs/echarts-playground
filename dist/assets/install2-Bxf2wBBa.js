import{e as G,bJ as F,at as H,bM as R,bP as j,bV as C,ax as U,bU as Z,bT as q,E as J,O as X,j as Y,i as V,bw as K,bq as $,P as ee,bZ as A,U as te,G as ae,N as oe}from"./index-B7p1rSoh.js";import{r as ne}from"./whiskerBoxCommon-CGJQCfB3.js";import"./createSeriesDataSimply-BvwvDBDa.js";var z=function(n){function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return G(a,n),a.type="series.boxplot",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},a}(F);H(z,ne,!0);var ie=z,re=function(n){function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=a.type,t}return G(a,n),a.prototype.render=function(t,i,o){var e=t.getData(),r=this.group,s=this._data;this._data||r.removeAll();var v=t.get("layout")==="horizontal"?1:0;e.diff(s).add(function(l){if(e.hasValue(l)){var u=_(e.getItemLayout(l),e,l,v,!0);e.setItemGraphicEl(l,u),r.add(u)}}).update(function(l,u){var p=s.getItemGraphicEl(u);if(e.hasValue(l)){var c=e.getItemLayout(l);p?(R(p),k(c,p,e,l)):p=_(c,e,l,v),r.add(p),e.setItemGraphicEl(l,p)}else r.remove(p)}).remove(function(l){var u=s.getItemGraphicEl(l);u&&r.remove(u)}).execute(),this._data=e},a.prototype.remove=function(t){var i=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(e){e&&i.remove(e)})},a.type="boxplot",a}(j),se=function(){},ue=function(n){function a(t){var i=n.call(this,t)||this;return i.type="boxplotBoxPath",i}return G(a,n),a.prototype.getDefaultShape=function(){return new se},a.prototype.buildPath=function(t,i){var o=i.points,e=0;for(t.moveTo(o[e][0],o[e][1]),e++;e<4;e++)t.lineTo(o[e][0],o[e][1]);for(t.closePath();e<o.length;e++)t.moveTo(o[e][0],o[e][1]),e++,t.lineTo(o[e][0],o[e][1])},a}(C);function _(n,a,t,i,o){var e=n.ends,r=new ue({shape:{points:o?le(e,i,n):e}});return k(n,r,a,t,o),r}function k(n,a,t,i,o){var e=t.hostModel;(0,U[o?"initProps":"updateProps"])(a,{shape:{points:n.ends}},e,i),a.useStyle(t.getItemVisual(i,"style")),a.style.strokeNoScale=!0,a.z2=100;var r=t.getItemModel(i),s=r.getModel("emphasis");Z(a,r),q(a,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function le(n,a,t){return J(n,function(i){return(i=i.slice())[a]=t.initBaseline,i})}var pe=re,P=oe;function ce(n){var a=function(t){var i=[],o=[];return t.eachSeriesByType("boxplot",function(e){var r=e.getBaseAxis(),s=X(o,r);s<0&&(s=o.length,o[s]=r,i[s]={axis:r,seriesModels:[]}),i[s].seriesModels.push(e)}),i}(n);P(a,function(t){var i=t.seriesModels;i.length&&(function(o){var e,r=o.axis,s=o.seriesModels,v=s.length,l=o.boxWidthList=[],u=o.boxOffsetList=[],p=[];if(r.type==="category")e=r.getBandWidth();else{var c=0;P(s,function(m){c=Math.max(c,m.getData().count())});var g=r.getExtent();e=Math.abs(g[1]-g[0])/c}P(s,function(m){var h=m.get("boxWidth");Y(h)||(h=[h,h]),p.push([V(h[0],e)||0,V(h[1],e)||0])});var b=.8*e-2,y=b/v*.3,d=(b-y*(v-1))/v,f=d/2-b/2;P(s,function(m,h){u.push(f),f+=y+d,l.push(Math.min(Math.max(d,p[h][0]),p[h][1]))})}(t),P(i,function(o,e){(function(r,s,v){var l=r.coordinateSystem,u=r.getData(),p=v/2,c=r.get("layout")==="horizontal"?0:1,g=1-c,b=["x","y"],y=u.mapDimension(b[c]),d=u.mapDimensionsAll(b[g]);if(y==null||d.length<5)return;for(var f=0;f<u.count();f++){var m=u.get(y,f),h=E(m,d[2],f),S=E(m,d[0],f),D=E(m,d[1],f),w=E(m,d[3],f),B=E(m,d[4],f),T=[];O(T,D,!1),O(T,w,!0),T.push(S,D,B,w),W(T,S),W(T,B),W(T,h),u.setItemLayout(f,{initBaseline:h[g],ends:T})}function E(M,N,I){var x,L=u.get(N,I),Q=[];return Q[c]=M,Q[g]=L,isNaN(M)||isNaN(L)?x=[NaN,NaN]:(x=l.dataToPoint(Q))[c]+=s,x}function O(M,N,I){var x=N.slice(),L=N.slice();x[c]+=p,L[c]-=p,I?M.push(x,L):M.push(L,x)}function W(M,N){var I=N.slice(),x=N.slice();I[c]-=p,x[c]+=p,M.push(I,x)}})(o,t.boxOffsetList[e],t.boxWidthList[e])}))})}var he={type:"echarts:boxplot",transform:function(n){var a=n.upstream;a.sourceFormat!==K&&$("");var t=function(i,o){for(var e=[],r=[],s=(o=o||{}).boundIQR,v=s==="none"||s===0,l=0;l<i.length;l++){var u=ee(i[l].slice()),p=A(u,.25),c=A(u,.5),g=A(u,.75),b=u[0],y=u[u.length-1],d=(s??1.5)*(g-p),f=v?b:Math.max(b,p-d),m=v?y:Math.min(y,g+d),h=o.itemNameFormatter,S=te(h)?h({value:l}):ae(h)?h.replace("{value}",l+""):l+"";e.push([S,f,p,c,g,m]);for(var D=0;D<u.length;D++){var w=u[D];if(w<f||w>m){var B=[S,w];r.push(B)}}}return{boxData:e,outliers:r}}(a.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:t.boxData},{data:t.outliers}]}};function ve(n){n.registerSeriesModel(ie),n.registerChartView(pe),n.registerLayout(ce),n.registerTransform(he)}export{ve as install};
