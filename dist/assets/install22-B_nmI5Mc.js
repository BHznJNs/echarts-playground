import{R as E,T as F,C as A,g as G,U as O,a as V,D as T,I as Y,G as Z,N as j}from"./index-DqzYUymv.js";var k={label:{enabled:!0},decal:{show:!1}},L=E(),q={};function z(t,l){var o=t.getModel("aria");if(o.get("enabled")){var x=F(k);A(x.label,t.getLocaleModel().get("aria"),!1),A(o.option,x,!1),function(){if(o.getModel("decal").get("show")){var u=G();t.eachSeries(function(e){if(!e.isColorBySeries()){var a=u.get(e.type);a||(a={},u.set(e.type,a)),L(e).scope=a}}),t.eachRawSeries(function(e){if(!t.isSeriesFiltered(e))if(O(e.enableAriaDecal))e.enableAriaDecal();else{var a=e.getData();if(e.isColorBySeries()){var g=V(e.ecModel,e.name,q,t.getSeriesCount()),s=a.getVisual("decal");a.setVisual("decal",v(s,g))}else{var c=e.getRawData(),h={},M=L(e).scope;a.each(function(r){var n=a.getRawIndex(r);h[n]=r});var b=c.count();c.each(function(r){var n=h[r],d=c.getName(r)||r+"",i=V(e.ecModel,d,M,b),I=a.getItemVisual(n,"decal");a.setItemVisual(n,"decal",v(I,i))})}}function v(r,n){var d=r?T(T({},n),r):n;return d.dirty=!0,d}})}}(),function(){var u=t.getLocaleModel().get("aria"),e=o.getModel("label");if(e.option=Y(e.option,u),!!e.get("enabled")){var a=l.getZr().dom;if(e.get("description"))return void a.setAttribute("aria-label",e.get("description"));var g,s=t.getSeriesCount(),c=e.get(["data","maxCount"])||10,h=e.get(["series","maxCount"])||10,M=Math.min(s,h);if(!(s<1)){var b=function(){var i=t.get("title");return i&&i.length&&(i=i[0]),i&&i.text}();g=b?p(e.get(["general","withTitle"]),{title:b}):e.get(["general","withoutTitle"]);var v=[];g+=p(s>1?e.get(["series","multiple","prefix"]):e.get(["series","single","prefix"]),{seriesCount:s}),t.eachSeries(function(i,I){if(I<M){var f=void 0,y=i.get("name")?"withName":"withoutName";f=p(f=s>1?e.get(["series","multiple",y]):e.get(["series","single",y]),{seriesId:i.seriesIndex,seriesName:i.get("name"),seriesType:(D=i.subType,R=t.getLocaleModel().get(["series","typeNames"]),R[D]||R.chart)});var w=i.getData();w.count()>c?f+=p(e.get(["data","partialData"]),{displayCnt:c}):f+=e.get(["data","allData"]);for(var C=e.get(["data","separator","middle"]),B=e.get(["data","separator","end"]),N=[],m=0;m<w.count();m++)if(m<c){var S=w.getName(m),P=w.getValues(m),U=e.get(["data",S?"withName":"withoutName"]);N.push(p(U,{name:S,value:P.join(C)}))}f+=N.join(C)+B,v.push(f)}var D,R});var r=e.getModel(["series","multiple","separator"]),n=r.get("middle"),d=r.get("end");g+=v.join(n)+d,a.setAttribute("aria-label",g)}}}()}function p(u,e){if(!Z(u))return u;var a=u;return j(e,function(g,s){a=a.replace(new RegExp("\\{\\s*"+s+"\\s*\\}","g"),g)}),a}}function H(t){if(t&&t.aria){var l=t.aria;l.show!=null&&(l.enabled=l.show),l.label=l.label||{},j(["description","general","series","data"],function(o){l[o]!=null&&(l.label[o]=l[o])})}}function K(t){t.registerPreprocessor(H),t.registerVisual(t.PRIORITY.VISUAL.ARIA,z)}export{K as install};
