import{e as $,E as I,I as G,C as z,T as K,G as F,U as O,b as Q,at as W,au as X,o as J,N as x,j as B,aE as Y,ay as Z,r as tt,B as et,aA as R,$ as nt,av as it,i as D,aQ as U,ap as at}from"./index-B7CpzWKR.js";import{n as ot}from"./axisDefault-Cv7m09NZ.js";import{C as rt}from"./AxisBuilder-BRJQ1q1N.js";import{s as st}from"./axisAlignTicks-Dfn_WIS-.js";import"./labelLayoutHelper-P1A9xGnK.js";var T=ot.value;function E(a,t){return G({show:t},a)}var ct=function(a){function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return $(t,a),t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),n=this.get("splitNumber"),i=this.get("scale"),s=this.get("axisLine"),r=this.get("axisTick"),o=this.get("axisLabel"),d=this.get("axisName"),h=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),y=this.get("axisNameGap"),w=this.get("triggerEvent"),N=I(this.get("indicator")||[],function(l){l.max!=null&&l.max>0&&!l.min?l.min=0:l.min!=null&&l.min<0&&!l.max&&(l.max=0);var v=d;l.color!=null&&(v=G({color:l.color},d));var p=z(K(l),{boundaryGap:e,splitNumber:n,scale:i,axisLine:s,axisTick:r,axisLabel:o,name:l.text,showName:h,nameLocation:"end",nameGap:y,nameTextStyle:v,triggerEvent:w},!1);if(F(c)){var m=p.name;p.name=c.replace("{value}",m??"")}else O(c)&&(p.name=c(p.name,p));var g=new Q(p,null,this.ecModel);return W(g,X.prototype),g.mainType="radar",g.componentIndex=this.componentIndex,g},this);this._indicatorModels=N},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:z({lineStyle:{color:"#bbb"}},T.axisLine),axisLabel:E(T.axisLabel,!1),axisTick:E(T.axisTick,!1),splitLine:E(T.splitLine,!0),splitArea:E(T.splitArea,!0),indicator:[]},t}(J),lt=["axisLine","axisTickLabel","axisName"],ht=function(a){function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return $(t,a),t.prototype.render=function(e,n,i){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var n=e.coordinateSystem,i=n.getIndicatorAxes(),s=I(i,function(r){var o=r.model.get("showName")?r.name:"";return new rt(r.model,{axisName:o,position:[n.cx,n.cy],rotation:r.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});x(s,function(r){x(lt,r.add,r),this.group.add(r.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(e){var n=e.coordinateSystem,i=n.getIndicatorAxes();if(i.length){var s=e.get("shape"),r=e.getModel("splitLine"),o=e.getModel("splitArea"),d=r.getModel("lineStyle"),h=o.getModel("areaStyle"),c=r.get("show"),y=o.get("show"),w=d.get("color"),N=h.get("color"),l=B(w)?w:[w],v=B(N)?N:[N],p=[],m=[];if(s==="circle")for(var g=i[0].getTicksCoords(),S=n.cx,V=n.cy,u=0;u<g.length;u++)c&&p[k(p,l,u)].push(new Y({shape:{cx:S,cy:V,r:g[u].coord}})),y&&u<g.length-1&&m[k(m,v,u)].push(new Z({shape:{cx:S,cy:V,r0:g[u].coord,r:g[u+1].coord}}));else{var _,H=I(i,function(f,b){var M=f.getTicksCoords();return _=_==null?M.length-1:Math.min(M.length-1,_),I(M,function(L){return n.coordToPoint(L.coord,b)})}),P=[];for(u=0;u<=_;u++){for(var A=[],C=0;C<i.length;C++)A.push(H[C][u]);A[0]&&A.push(A[0].slice()),c&&p[k(p,l,u)].push(new tt({shape:{points:A}})),y&&P&&m[k(m,v,u-1)].push(new et({shape:{points:A.concat(P)}})),P=A.slice().reverse()}}var j=d.getLineStyle(),q=h.getAreaStyle();x(m,function(f,b){this.group.add(R(f,{style:G({stroke:"none",fill:v[b%v.length]},q),silent:!0}))},this),x(p,function(f,b){this.group.add(R(f,{style:G({fill:"none",stroke:l[b%l.length]},j),silent:!0}))},this)}function k(f,b,M){var L=M%b.length;return f[L]=f[L]||[],L}},t.type="radar",t}(nt),ut=function(a){function t(e,n,i){var s=a.call(this,e,n,i)||this;return s.type="value",s.angle=0,s.name="",s}return $(t,a),t}(it),dt=function(){function a(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=I(t.getIndicatorModels(),function(i,s){var r="indicator_"+s,o=new ut(r,new U);return o.name=i.get("name"),o.model=i,i.axis=o,this.dimensions.push(r),o},this),this.resize(t,n)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},a.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},a.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var s,r=Math.atan2(-n,e),o=1/0,d=-1,h=0;h<this._indicatorAxes.length;h++){var c=this._indicatorAxes[h],y=Math.abs(r-c.angle);y<o&&(s=c,d=h,o=y)}return[d,+(s&&s.coordToData(i))]},a.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),s=e.getHeight(),r=Math.min(i,s)/2;this.cx=D(n[0],i),this.cy=D(n[1],s),this.startAngle=t.get("startAngle")*Math.PI/180;var o=t.get("radius");(F(o)||at(o))&&(o=[0,o]),this.r0=D(o[0],r),this.r=D(o[1],r),x(this._indicatorAxes,function(d,h){d.setExtent(this.r0,this.r);var c=this.startAngle+h*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),d.angle=c},this)},a.prototype.update=function(t,e){var n=this._indicatorAxes,i=this._model;x(n,function(o){o.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(o,d){if(o.get("coordinateSystem")==="radar"&&t.getComponent("radar",o.get("radarIndex"))===i){var h=o.getData();x(n,function(c){c.scale.unionExtentFromData(h,h.mapDimension(c.dim))})}},this);var s=i.get("splitNumber"),r=new U;r.setExtent(0,s),r.setInterval(1),x(n,function(o,d){st(o.scale,o.model,r)})},a.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},a.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},a.create=function(t,e){var n=[];return t.eachComponent("radar",function(i){var s=new a(i,t,e);n.push(s),i.coordinateSystem=s}),t.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=n[i.get("radarIndex")||0])}),n},a.dimensions=[],a}();function yt(a){a.registerCoordinateSystem("radar",dt),a.registerComponentModel(ct),a.registerComponentView(ht),a.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(n){e.setItemVisual(n,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}export{yt as install};
