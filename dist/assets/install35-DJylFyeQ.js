import{e as x,A as M,N as b,aD as k,az as G,aK as R,aA as H,I,o as B,at as E,au as O,av as F,$ as J,Y as N,aL as j,as as K,aJ as V,aI as W,Z}from"./index-DqzYUymv.js";import{C as q}from"./AxisBuilder-BvSfZ_CI.js";import{P as D}from"./AxisView-Dt0Gp6ZK.js";import{s as Q,i as X}from"./axisSplitHelper-QwkAk2Ym.js";import{u as Y}from"./axisModelCreator-9f33LnYD.js";import{b as U,d as tt,g as et,B as it,m as ot,e as nt,i as rt}from"./install23-Dd3EMd_q.js";import"./axisDefault--AiVwrJc.js";import"./labelLayoutHelper-C9kjGaZq.js";function S(i,t){t=t||{};var e=i.coordinateSystem,o=i.axis,n={},r=o.position,a=o.orient,s=e.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],h={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};n.position=[a==="vertical"?h.vertical[r]:l[0],a==="horizontal"?h.horizontal[r]:l[3]],n.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],n.labelDirection=n.tickDirection=n.nameDirection={top:-1,bottom:1,right:1,left:-1}[r],i.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),j(t.labelInside,i.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var p=t.rotate;return p==null&&(p=i.get(["axisLabel","rotate"])),n.labelRotation=r==="top"?-p:p,n.z2=1,n}var at=["axisLine","axisTickLabel","axisName"],st=["splitArea","splitLine"],lt=function(i){function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="SingleAxisPointer",e}return x(t,i),t.prototype.render=function(e,o,n,r){var a=this.group;a.removeAll();var s=this._axisGroup;this._axisGroup=new M;var l=S(e),h=new q(e,l);b(at,h.add,h),a.add(this._axisGroup),a.add(h.getGroup()),b(st,function(p){e.get([p,"show"])&&pt[p](this,this.group,this._axisGroup,e)},this),k(s,this._axisGroup,e),i.prototype.render.call(this,e,o,n,r)},t.prototype.remove=function(){Q(this)},t.type="singleAxis",t}(D),pt={splitLine:function(i,t,e,o){var n=o.axis;if(!n.scale.isBlank()){var r=o.getModel("splitLine"),a=r.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=a.get("width"),h=o.coordinateSystem.getRect(),p=n.isHorizontal(),u=[],y=0,c=n.getTicksCoords({tickModel:r}),g=[],f=[],d=0;d<c.length;++d){var m=n.toGlobalCoord(c[d].coord);p?(g[0]=m,g[1]=h.y,f[0]=m,f[1]=h.y+h.height):(g[0]=h.x,g[1]=m,f[0]=h.x+h.width,f[1]=m);var C=new G({shape:{x1:g[0],y1:g[1],x2:f[0],y2:f[1]},silent:!0});R(C.shape,l);var A=y++%s.length;u[A]=u[A]||[],u[A].push(C)}var P=a.getLineStyle(["color"]);for(d=0;d<u.length;++d)t.add(H(u[d],{style:I({stroke:s[d%s.length]},P),silent:!0}))}},splitArea:function(i,t,e,o){X(i,e,o,o)}},ht=lt,L=function(i){function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return x(t,i),t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(B);E(L,O.prototype);var w=L,ut=function(i){function t(e,o,n,r,a){var s=i.call(this,e,o,n)||this;return s.type=r||"value",s.position=a||"bottom",s}return x(t,i),t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.pointToData=function(e,o){return this.coordinateSystem.pointToData(e)[0]},t}(F),$=["single"],ct=function(){function i(t,e,o){this.type="single",this.dimension="single",this.dimensions=$,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,o)}return i.prototype._init=function(t,e,o){var n=this.dimension,r=new ut(n,V(t),[0,0],t.get("type"),t.get("position")),a=r.type==="category";r.onBand=a&&t.get("boundaryGap"),r.inverse=t.get("inverse"),r.orient=t.get("orient"),t.axis=r,r.model=t,r.coordinateSystem=this,this._axis=r},i.prototype.update=function(t,e){t.eachSeries(function(o){if(o.coordinateSystem===this){var n=o.getData();b(n.mapDimensionsAll(this.dimension),function(r){this._axis.scale.unionExtentFromData(n,r)},this),W(this._axis.scale,this._axis.model)}},this)},i.prototype.resize=function(t,e){this._rect=Z({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},i.prototype.getRect=function(){return this._rect},i.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,o=e.isHorizontal(),n=o?[0,t.width]:[0,t.height],r=e.inverse?1:0;e.setExtent(n[r],n[1-r]),this._updateAxisTransform(e,o?t.x:t.y)},i.prototype._updateAxisTransform=function(t,e){var o=t.getExtent(),n=o[0]+o[1],r=t.isHorizontal();t.toGlobalCoord=r?function(a){return a+e}:function(a){return n-a+e},t.toLocalCoord=r?function(a){return a-e}:function(a){return n-a+e}},i.prototype.getAxis=function(){return this._axis},i.prototype.getBaseAxis=function(){return this._axis},i.prototype.getAxes=function(){return[this._axis]},i.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},i.prototype.containPoint=function(t){var e=this.getRect(),o=this.getAxis();return o.orient==="horizontal"?o.contain(o.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:o.contain(o.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},i.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t[e.orient==="horizontal"?0:1]))]},i.prototype.dataToPoint=function(t){var e=this.getAxis(),o=this.getRect(),n=[],r=e.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),n[r]=e.toGlobalCoord(e.dataToCoord(+t)),n[1-r]=r===0?o.y+o.height/2:o.x+o.width/2,n},i.prototype.convertToPixel=function(t,e,o){return T(e)===this?this.dataToPoint(o):null},i.prototype.convertFromPixel=function(t,e,o){return T(e)===this?this.pointToData(o):null},i}();function T(i){var t=i.seriesModel,e=i.singleAxisModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}var gt={create:function(i,t){var e=[];return i.eachComponent("singleAxis",function(o,n){var r=new ct(o,i,t);r.name="single_"+n,r.resize(o,t),o.coordinateSystem=r,e.push(r)}),i.eachSeries(function(o){if(o.get("coordinateSystem")==="singleAxis"){var n=o.getReferringComponents("singleAxis",K).models[0];o.coordinateSystem=n&&n.coordinateSystem}}),e},dimensions:$},z=["x","y"],dt=["width","height"],yt=function(i){function t(){return i!==null&&i.apply(this,arguments)||this}return x(t,i),t.prototype.makeElOption=function(e,o,n,r,a){var s=n.axis,l=s.coordinateSystem,h=_(l,1-v(s)),p=l.dataToPoint(o)[0],u=r.get("type");if(u&&u!=="none"){var y=U(r),c=ft[u](s,p,h);c.style=y,e.graphicKey=c.type,e.pointer=c}var g=S(n);tt(o,e,g,n,r,a)},t.prototype.getHandleTransform=function(e,o,n){var r=S(o,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var a=et(o.axis,e,r);return{x:a[0],y:a[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,o,n,r){var a=n.axis,s=a.coordinateSystem,l=v(a),h=_(s,l),p=[e.x,e.y];p[l]+=o[l],p[l]=Math.min(h[1],p[l]),p[l]=Math.max(h[0],p[l]);var u=_(s,1-l),y=(u[1]+u[0])/2,c=[y,y];return c[l]=p[l],{x:p[0],y:p[1],rotation:e.rotation,cursorPoint:c,tooltipOption:{verticalAlign:"middle"}}},t}(it),ft={line:function(i,t,e){return{type:"Line",subPixelOptimize:!0,shape:ot([t,e[0]],[t,e[1]],v(i))}},shadow:function(i,t,e){var o=i.getBandWidth(),n=e[1]-e[0];return{type:"Rect",shape:nt([t-o/2,e[0]],[o,n],v(i))}}};function v(i){return i.isHorizontal()?0:1}function _(i,t){var e=i.getRect();return[e[z[t]],e[z[t]]+e[dt[t]]]}var xt=yt,mt=function(i){function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return x(t,i),t.type="single",t}(J);function zt(i){N(rt),D.registerAxisPointerClass("SingleAxisPointer",xt),i.registerComponentView(mt),i.registerComponentView(ht),i.registerComponentModel(w),Y(i,"single",w,w.defaultOption),i.registerCoordinateSystem("single",gt)}export{zt as install};
