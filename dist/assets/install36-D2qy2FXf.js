import{e as z,N as I,a6 as q,aM as Q,aB as U,T as J,aN as K,o as $,X as ee,at as te,aO as oe,$ as ne,av as ie,R as ae,aP as re,Z as le,G as R,ar as V,aq as se,aQ as pe,aR as ce,aS as ue,A as he,az as E,D as ge,I as Z,H as T,M as B,a8 as de,f as ye,w as L,P as me,S as fe,L as ve,C as xe,aT as _e,aU as Se,aF as be,aV as Ce,ae as Pe,ao as we,z as Te,j as H}from"./index-CfHuJ7al.js";var N=function(s){function i(){var e=s!==null&&s.apply(this,arguments)||this;return e.type=i.type,e.layoutMode="box",e}return z(i,s),i.prototype.init=function(e,t,o){this.mergeDefaultAndTheme(e,o),this._initData()},i.prototype.mergeOption=function(e){s.prototype.mergeOption.apply(this,arguments),this._initData()},i.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(e>=t&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},i.prototype.getCurrentIndex=function(){return this.option.currentIndex},i.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},i.prototype.setPlayState=function(e){this.option.autoPlay=!!e},i.prototype.getPlayState=function(){return!!this.option.autoPlay},i.prototype._initData=function(){var e,t=this.option,o=t.data||[],n=t.axisType,a=this._names=[];n==="category"?(e=[],I(o,function(c,l){var p,u=q(Q(c),"");U(c)?(p=J(c)).value=l:p=l,e.push(p),a.push(u)})):e=o;var r={category:"ordinal",time:"time",value:"number"}[n]||"number";(this._data=new K([{name:"value",type:r}],this)).initData(e,a)},i.prototype.getData=function(){return this._data},i.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},i.type="timeline",i.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},i}($),j=function(s){function i(){var e=s!==null&&s.apply(this,arguments)||this;return e.type=i.type,e}return z(i,s),i.type="timeline.slider",i.defaultOption=ee(N.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),i}(N);te(j,oe.prototype);var Me=j,Ie=function(s){function i(){var e=s!==null&&s.apply(this,arguments)||this;return e.type=i.type,e}return z(i,s),i.type="timeline",i}(ne),Ae=function(s){function i(e,t,o,n){var a=s.call(this,e,t,o)||this;return a.type=n||"value",a}return z(i,s),i.prototype.getLabelModel=function(){return this.model.getModel("label")},i.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},i}(ie),k=Math.PI,W=ae();function X(s,i,e,t,o,n){var a=i.get("color");if(o)o.setColor(a),e.add(o),n&&n.onUpdate(o);else{var r=s.get("symbol");(o=ve(r,-1,-1,2,2,a)).setStyle("strokeNoScale",!0),e.add(o),n&&n.onCreate(o)}var c=i.getItemStyle(["color"]);o.setStyle(c),t=xe({rectHover:!0,z2:100},t,!0);var l=_e(s.get("symbolSize"));t.scaleX=l[0]/2,t.scaleY=l[1]/2;var p=Se(s.get("symbolOffset"),l);p&&(t.x=(t.x||0)+p[0],t.y=(t.y||0)+p[1]);var u=s.get("symbolRotate");return t.rotation=(u||0)*Math.PI/180||0,o.attr(t),o.updateTransform(),o}function F(s,i,e,t,o,n){if(!s.dragging){var a=o.getModel("checkpointStyle"),r=t.dataToCoord(o.getData().get("value",e));if(n||!a.get("animation",!0))s.attr({x:r,y:0}),i&&i.attr({shape:{x2:r}});else{var c={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};s.stopAnimation(null,!0),s.animateTo({x:r,y:0},c),i&&i.animateTo({shape:{x2:r}},c)}}}var ze=function(s){function i(){var e=s!==null&&s.apply(this,arguments)||this;return e.type=i.type,e}return z(i,s),i.prototype.init=function(e,t){this.api=t},i.prototype.render=function(e,t,o){if(this.model=e,this.api=o,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var n=this._layout(e,o),a=this._createGroup("_mainGroup"),r=this._createGroup("_labelGroup"),c=this._axis=this._createAxis(n,e);e.formatTooltip=function(l){var p=c.scale.getLabel({value:l});return re("nameValue",{noName:!0,value:p})},I(["AxisLine","AxisTick","Control","CurrentPointer"],function(l){this["_render"+l](n,a,c,e)},this),this._renderAxisLabel(n,r,c,e),this._position(n,e)}this._doPlayStop(),this._updateTicksStatus()},i.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},i.prototype.dispose=function(){this._clearTimer()},i.prototype._layout=function(e,t){var o,n,a,r,c=e.get(["label","position"]),l=e.get("orient"),p=function(G,O){return le(G.getBoxLayoutParams(),{width:O.getWidth(),height:O.getHeight()},G.get("padding"))}(e,t),u={horizontal:"center",vertical:(o=c==null||c==="auto"?l==="horizontal"?p.y+p.height/2<t.getHeight()/2?"-":"+":p.x+p.width/2<t.getWidth()/2?"+":"-":R(c)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[l][c]:c)>=0||o==="+"?"left":"right"},x={horizontal:o>=0||o==="+"?"top":"bottom",vertical:"middle"},m={horizontal:0,vertical:k/2},f=l==="vertical"?p.height:p.width,d=e.getModel("controlStyle"),h=d.get("show",!0),y=h?d.get("itemSize"):0,_=h?d.get("itemGap"):0,v=y+_,g=e.get(["label","rotate"])||0;g=g*k/180;var S=d.get("position",!0),P=h&&d.get("showPlayBtn",!0),b=h&&d.get("showPrevBtn",!0),C=h&&d.get("showNextBtn",!0),A=0,w=f;S==="left"||S==="bottom"?(P&&(n=[0,0],A+=v),b&&(a=[A,0],A+=v),C&&(r=[w-y,0],w-=v)):(P&&(n=[w-y,0],w-=v),b&&(a=[0,0],A+=v),C&&(r=[w-y,0],w-=v));var D=[A,w];return e.get("inverse")&&D.reverse(),{viewRect:p,mainLength:f,orient:l,rotation:m[l],labelRotation:g,labelPosOpt:o,labelAlign:e.get(["label","align"])||u[l],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||x[l],playPosition:n,prevBtnPosition:a,nextBtnPosition:r,axisExtent:D,controlSize:y,controlGap:_}},i.prototype._position=function(e,t){var o=this._mainGroup,n=this._labelGroup,a=e.viewRect;if(e.orient==="vertical"){var r=be(),c=a.x,l=a.y+a.height;V(r,r,[-c,-l]),se(r,r,-k/2),V(r,r,[c,l]),(a=a.clone()).applyTransform(r)}var p=_(a),u=_(o.getBoundingRect()),x=_(n.getBoundingRect()),m=[o.x,o.y],f=[n.x,n.y];f[0]=m[0]=p[0][0];var d,h=e.labelPosOpt;h==null||R(h)?(v(m,u,p,1,d=h==="+"?0:1),v(f,x,p,1,1-d)):(v(m,u,p,1,d=h>=0?0:1),f[1]=m[1]+h);function y(g){g.originX=p[0][0]-g.x,g.originY=p[1][0]-g.y}function _(g){return[[g.x,g.x+g.width],[g.y,g.y+g.height]]}function v(g,S,P,b,C){g[b]+=P[b][C]-S[b][C]}o.setPosition(m),n.setPosition(f),o.rotation=n.rotation=e.rotation,y(o),y(n)},i.prototype._createAxis=function(e,t){var o=t.getData(),n=t.get("axisType"),a=function(l,p){if(p=p||l.get("type"),p)switch(p){case"category":return new ue({ordinalMeta:l.getCategories(),extent:[1/0,-1/0]});case"time":return new ce({locale:l.ecModel.getLocaleModel(),useUTC:l.ecModel.get("useUTC")});default:return new pe}}(t,n);a.getTicks=function(){return o.mapArray(["value"],function(l){return{value:l}})};var r=o.getDataExtent("value");a.setExtent(r[0],r[1]),a.calcNiceTicks();var c=new Ae("value",a,e.axisExtent,n);return c.model=t,c},i.prototype._createGroup=function(e){var t=this[e]=new he;return this.group.add(t),t},i.prototype._renderAxisLine=function(e,t,o,n){var a=o.getExtent();if(n.get(["lineStyle","show"])){var r=new E({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:ge({lineCap:"round"},n.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});t.add(r);var c=this._progressLine=new E({shape:{x1:a[0],x2:this._currentPointer?this._currentPointer.x:a[0],y1:0,y2:0},style:Z({lineCap:"round",lineWidth:r.style.lineWidth},n.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});t.add(c)}},i.prototype._renderAxisTick=function(e,t,o,n){var a=this,r=n.getData(),c=o.scale.getTicks();this._tickSymbols=[],I(c,function(l){var p=o.dataToCoord(l.value),u=r.getItemModel(l.value),x=u.getModel("itemStyle"),m=u.getModel(["emphasis","itemStyle"]),f=u.getModel(["progress","itemStyle"]),d={x:p,y:0,onclick:T(a._changeTimeline,a,l.value)},h=X(u,x,t,d);h.ensureState("emphasis").style=m.getItemStyle(),h.ensureState("progress").style=f.getItemStyle(),B(h);var y=de(h);u.get("tooltip")?(y.dataIndex=l.value,y.dataModel=n):y.dataIndex=y.dataModel=null,a._tickSymbols.push(h)})},i.prototype._renderAxisLabel=function(e,t,o,n){var a=this;if(o.getLabelModel().get("show")){var r=n.getData(),c=o.getViewLabels();this._tickLabels=[],I(c,function(l){var p=l.tickValue,u=r.getItemModel(p),x=u.getModel("label"),m=u.getModel(["emphasis","label"]),f=u.getModel(["progress","label"]),d=o.dataToCoord(l.tickValue),h=new ye({x:d,y:0,rotation:e.labelRotation-e.rotation,onclick:T(a._changeTimeline,a,p),silent:!1,style:L(x,{text:l.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});h.ensureState("emphasis").style=L(m),h.ensureState("progress").style=L(f),t.add(h),B(h),W(h).dataIndex=p,a._tickLabels.push(h)})}},i.prototype._renderControl=function(e,t,o,n){var a=e.controlSize,r=e.rotation,c=n.getModel("controlStyle").getItemStyle(),l=n.getModel(["emphasis","controlStyle"]).getItemStyle(),p=n.getPlayState(),u=n.get("inverse",!0);function x(m,f,d,h){if(m){var y=Ce(Pe(n.get(["controlStyle",f+"BtnSize"]),a),a),_=function(v,g,S,P){var b=P.style,C=we(v.get(["controlStyle",g]),P||{},new Te(S[0],S[1],S[2],S[3]));return b&&C.setStyle(b),C}(n,f+"Icon",[0,-y/2,y,y],{x:m[0],y:m[1],originX:a/2,originY:0,rotation:h?-r:0,rectHover:!0,style:c,onclick:d});_.ensureState("emphasis").style=l,t.add(_),B(_)}}x(e.nextBtnPosition,"next",T(this._changeTimeline,this,u?"-":"+")),x(e.prevBtnPosition,"prev",T(this._changeTimeline,this,u?"+":"-")),x(e.playPosition,p?"stop":"play",T(this._handlePlayClick,this,!p),!0)},i.prototype._renderCurrentPointer=function(e,t,o,n){var a=n.getData(),r=n.getCurrentIndex(),c=a.getItemModel(r).getModel("checkpointStyle"),l=this,p={onCreate:function(u){u.draggable=!0,u.drift=T(l._handlePointerDrag,l),u.ondragend=T(l._handlePointerDragend,l),F(u,l._progressLine,r,o,n,!0)},onUpdate:function(u){F(u,l._progressLine,r,o,n)}};this._currentPointer=X(c,c,this._mainGroup,{},this._currentPointer,p)},i.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},i.prototype._handlePointerDrag=function(e,t,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},i.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},i.prototype._pointerChangeTimeline=function(e,t){var o=this._toAxisCoord(e)[0],n=this._axis,a=me(n.getExtent().slice());o>a[1]&&(o=a[1]),o<a[0]&&(o=a[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var r=this._progressLine;r&&(r.shape.x2=o,r.dirty());var c=this._findNearestTick(o),l=this.model;(t||c!==l.getCurrentIndex()&&l.get("realtime"))&&this._changeTimeline(c)},i.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var t=e.model;e._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},i.prototype._toAxisCoord=function(e){var t=this._mainGroup.getLocalTransform();return fe(e,t,!0)},i.prototype._findNearestTick=function(e){var t,o=this.model.getData(),n=1/0,a=this._axis;return o.each(["value"],function(r,c){var l=a.dataToCoord(r),p=Math.abs(l-e);p<n&&(n=p,t=c)}),t},i.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},i.prototype._changeTimeline=function(e){var t=this.model.getCurrentIndex();e==="+"?e=t+1:e==="-"&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},i.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),t=this._tickSymbols,o=this._tickLabels;if(t)for(var n=0;n<t.length;n++)t&&t[n]&&t[n].toggleState("progress",n<e);if(o)for(n=0;n<o.length;n++)o&&o[n]&&o[n].toggleState("progress",W(o[n]).dataIndex<=e)},i.type="timeline.slider",i}(Ie);function Be(s){var i=s&&s.timeline;H(i)||(i=i?[i]:[]),I(i,function(e){e&&function(t){var o=t.type,n={number:"value",time:"time"};if(n[o]&&(t.axisType=n[o],delete t.type),Y(t),M(t,"controlPosition")){var a=t.controlStyle||(t.controlStyle={});M(a,"position")||(a.position=t.controlPosition),a.position!=="none"||M(a,"show")||(a.show=!1,delete a.position),delete t.controlPosition}I(t.data||[],function(r){U(r)&&!H(r)&&(!M(r,"value")&&M(r,"name")&&(r.value=r.name),Y(r))})}(e)})}function Y(s){var i=s.itemStyle||(s.itemStyle={}),e=i.emphasis||(i.emphasis={}),t=s.label||s.label||{},o=t.normal||(t.normal={}),n={normal:1,emphasis:1};I(t,function(a,r){n[r]||M(o,r)||(o[r]=a)}),e.label&&!M(t,"emphasis")&&(t.emphasis=e.label,delete e.label)}function M(s,i){return s.hasOwnProperty(i)}function ke(s){s.registerComponentModel(Me),s.registerComponentView(ze),s.registerSubTypeDefaulter("timeline",function(){return"slider"}),function(i){i.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,o){var n=t.getComponent("timeline");return n&&e.currentIndex!=null&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Z({currentIndex:n.option.currentIndex},e)}),i.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var o=t.getComponent("timeline");o&&e.playState!=null&&o.setPlayState(e.playState)})}(s),s.registerPreprocessor(Be)}export{ke as install};
