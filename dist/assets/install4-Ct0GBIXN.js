import{R as ft,e as ct,bH as pt,bI as ht,bJ as vt,bO as mt,I as H,w as $,ad as yt,c2 as tt,c3 as xt,ab as D,c4 as It,aY as Ct,N as bt,bS as St,O as wt,aW as Pt,H as G,bU as Tt,ae as zt,c5 as Mt,ag as At,d as Dt,y as Rt,ac as Et,bp as Ot,al as Lt,c6 as _t,G as kt,E as J}from"./index-B3HKDY-B.js";import{r as et}from"./labelHelper-Hx0IwfHb.js";import{h as Gt}from"./createClipPathFromCoordSys-DEU0HEko.js";import{P as K,w as nt,S as Ft,y as Ht,L as Wt,b as Zt,V as Vt}from"./customGraphicKeyframeAnimation-Dhml8D6t.js";var at={color:"fill",borderColor:"stroke"},Bt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},R=ft(),Nt=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return ct(t,e),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(n,a){return pt(null,this)},t.prototype.getDataParams=function(n,a,i){var r=e.prototype.getDataParams.call(this,n,a);return i&&(r.info=R(i).info),r},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(ht);function Ut(e,t){return t=t||[0,0],J(["x","y"],function(n,a){var i=this.getAxis(n),r=t[a],s=e[a]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(r-s)-i.dataToCoord(r+s))},this)}function qt(e,t){return t=t||[0,0],J([0,1],function(n){var a=t[n],i=e[n]/2,r=[],s=[];return r[n]=a-i,s[n]=a+i,r[1-n]=s[1-n]=t[1-n],Math.abs(this.dataToPoint(r)[n]-this.dataToPoint(s)[n])},this)}function Yt(e,t){var n=this.getAxis(),a=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(a-i)-n.dataToCoord(a+i))}function Jt(e,t){return t=t||[0,0],J(["Radius","Angle"],function(n,a){var i=this["get"+n+"Axis"](),r=t[a],s=e[a]/2,u=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(r-s)-i.dataToCoord(r+s));return n==="Angle"&&(u=u*Math.PI/180),u},this)}var E="emphasis",L="normal",Q="blur",X="select",O=[L,E,Q,X],W={normal:["itemStyle"],emphasis:[E,"itemStyle"],blur:[Q,"itemStyle"],select:[X,"itemStyle"]},Z={normal:["label"],emphasis:[E,"label"],blur:[Q,"label"],select:[X,"label"]},Kt=["x","y"],Qt="e\0\0",z={normal:{},emphasis:{},blur:{},select:{}},Xt={cartesian2d:function(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:G(Ut,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(n){return e.dataToPoint(n)},size:G(qt,e)}}},single:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:G(Yt,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),a=t.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:a[1],r0:a[0]},api:{coord:function(i){var r=t.dataToRadius(i[0]),s=n.dataToAngle(i[1]),u=e.coordToPoint([r,s]);return u.push(r,s*Math.PI/180),u},size:G(Jt,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(a,i){return e.dataToPoint(a,i)}}}}};function U(e){return e instanceof Tt}function q(e){return e instanceof zt}var jt=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return ct(t,e),t.prototype.render=function(n,a,i,r){this._progressiveEls=null;var s=this._data,u=n.getData(),c=this.group,g=rt(n,u,a,i);s||c.removeAll(),u.diff(s).add(function(d){N(i,null,d,g(d,r),n,c,u)}).remove(function(d){var C=s.getItemGraphicEl(d);C&&K(C,R(C).option,n)}).update(function(d,C){var P=s.getItemGraphicEl(C);N(i,P,d,g(d,r),n,c,u)}).execute();var I=n.get("clip",!0)?Gt(n.coordinateSystem,!1,n):null;I?c.setClipPath(I):c.removeClipPath(),this._data=u},t.prototype.incrementalPrepareRender=function(n,a,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(n,a,i,r,s){var u=a.getData(),c=rt(a,u,i,r),g=this._progressiveEls=[];function I(P){P.isGroup||(P.incremental=!0,P.ensureState("emphasis").hoverLayer=!0)}for(var d=n.start;d<n.end;d++){var C=N(null,null,d,c(d,s),a,this.group,u);C&&(C.traverse(I),g.push(C))}},t.prototype.eachRendered=function(n){vt(this._progressiveEls||this.group,n)},t.prototype.filterForExposedEvent=function(n,a,i,r){var s=a.element;if(s==null||i.name===s)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===s)return!0;return!1},t.type="custom",t}(mt);function V(e){var t,n=e.type;if(n==="path"){var a=e.shape,i=a.width!=null&&a.height!=null?{x:a.x||0,y:a.y||0,width:a.width,height:a.height}:null,r=dt(a);t=Mt(r,null,i,a.layout||"center"),R(t).customPathData=r}else if(n==="image")t=new At({}),R(t).customImagePath=e.style.image;else if(n==="text")t=new Dt({});else if(n==="group")t=new Rt;else{if(n==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var s=Et(n);s||Ot(""),t=new s}return R(t).customGraphicType=n,t.name=e.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function B(e,t,n,a,i,r,s){Wt(t);var u=i&&i.normal.cfg;u&&t.setTextConfig(u),a&&a.transition==null&&(a.transition=Kt);var c=a&&a.style;if(c){if(t.type==="text"){var g=c;D(g,"textFill")&&(g.fill=g.textFill),D(g,"textStroke")&&(g.stroke=g.textStroke)}var I=void 0,d=U(t)?c.decal:null;e&&d&&(d.dirty=!0,I=Lt(d,e)),c.__decalPattern=I}q(t)&&c&&(I=c.__decalPattern)&&(c.decal=I),Zt(t,a,r,{dataIndex:n,isInit:s,clearStyle:!0}),Vt(t,a.keyframeAnimation,r)}function it(e,t,n,a,i){var r=t.isGroup?null:t,s=i&&i[e].cfg;if(r){var u=r.ensureState(e);if(a===!1){var c=r.getState(e);c&&(c.style=null)}else u.style=a||null;s&&(u.textConfig=s),_t(r)}}function $t(e,t,n){var a=n===L,i=a?t:F(t,n),r=i?i.z2:null;r!=null&&((a?e:e.ensureState(n)).z2=r||0)}function rt(e,t,n,a){var i=e.get("renderItem"),r=e.coordinateSystem,s={};r&&(s=r.prepareCustoms?r.prepareCustoms(r):Xt[r.type](r));for(var u,c,g=H({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:function(l,o){return o==null&&(o=u),t.getStore().get(t.getDimensionIndex(l||0),o)},style:function(l,o){o==null&&(o=u);var f=t.getItemVisual(o,"style"),h=f&&f.fill,S=f&&f.opacity,m=b(o,L).getItemStyle();h!=null&&(m.fill=h),S!=null&&(m.opacity=S);var M={inheritColor:kt(h)?h:"#000"},A=T(o,L),k=$(A,null,M,!1,!0);k.text=A.getShallow("show")?yt(e.getFormattedLabel(o,L),et(t,o)):null;var gt=tt(A,M,!1);return p(l,m),m=nt(m,k,gt),l&&v(m,l),m.legacy=!0,m},ordinalRawValue:function(l,o){o==null&&(o=u),l=l||0;var f=t.getDimensionInfo(l);if(!f){var h=t.getDimensionIndex(l);return h>=0?t.getStore().get(h,o):void 0}var S=t.get(f.name,o),m=f&&f.ordinalMeta;return m?m.categories[S]:S},styleEmphasis:function(l,o){o==null&&(o=u);var f=b(o,E).getItemStyle(),h=T(o,E),S=$(h,null,null,!0,!0);S.text=h.getShallow("show")?xt(e.getFormattedLabel(o,E),e.getFormattedLabel(o,L),et(t,o)):null;var m=tt(h,null,!0);return p(l,f),f=nt(f,S,m),l&&v(f,l),f.legacy=!0,f},visual:function(l,o){if(o==null&&(o=u),D(at,l)){var f=t.getItemVisual(o,"style");return f?f[at[l]]:null}if(D(Bt,l))return t.getItemVisual(o,l)},barLayout:function(l){if(r.type==="cartesian2d"){var o=r.getBaseAxis();return It(H({axis:o},l))}},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(l){return Ct(l,n)}},s.api||{}),I={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:te(e.getData())},d={},C={},P={},_={},y=0;y<O.length;y++){var x=O[y];P[x]=e.getModel(W[x]),_[x]=e.getModel(Z[x])}function w(l){return l===u?c||(c=t.getItemModel(l)):t.getItemModel(l)}function b(l,o){return t.hasItemOption?l===u?d[o]||(d[o]=w(l).getModel(W[o])):w(l).getModel(W[o]):P[o]}function T(l,o){return t.hasItemOption?l===u?C[o]||(C[o]=w(l).getModel(Z[o])):w(l).getModel(Z[o]):_[o]}return function(l,o){return u=l,c=null,d={},C={},i&&i(H({dataIndexInside:l,dataIndex:t.getRawIndex(l),actionType:o?o.type:null},I),g)};function v(l,o){for(var f in o)D(o,f)&&(l[f]=o[f])}function p(l,o){l&&(l.textFill&&(o.textFill=l.textFill),l.textPosition&&(o.textPosition=l.textPosition))}}function te(e){var t={};return bt(e.dimensions,function(n){var a=e.getDimensionInfo(n);if(!a.isExtraCoord){var i=a.coordDim;(t[i]=t[i]||[])[a.coordDimIndex]=e.getDimensionIndex(n)}}),t}function N(e,t,n,a,i,r,s){if(a){var u=j(e,t,n,a,i,r);return u&&s.setItemGraphicEl(n,u),u&&St(u,a.focus,a.blurScope,a.emphasisDisabled),u}r.remove(t)}function j(e,t,n,a,i,r){var s=-1,u=t;t&&ot(t,a,i)&&(s=wt(r.childrenRef(),t),t=null);var c,g,I=!t,d=t;d?d.clearStates():(d=V(a),u&&(c=u,(g=d).copyTransform(c),q(g)&&q(c)&&(g.setStyle(c.style),g.z=c.z,g.z2=c.z2,g.zlevel=c.zlevel,g.invisible=c.invisible,g.ignore=c.ignore,U(g)&&U(c)&&g.setShape(c.shape)))),a.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),z.normal.cfg=z.normal.conOpt=z.emphasis.cfg=z.emphasis.conOpt=z.blur.cfg=z.blur.conOpt=z.select.cfg=z.select.conOpt=null,z.isLegacy=!1,function(y,x,w,b,T,v){if(!y.isGroup){lt(w,null,v),lt(w,E,v);var p=v.normal.conOpt,l=v.emphasis.conOpt,o=v.blur.conOpt,f=v.select.conOpt;if(p!=null||l!=null||f!=null||o!=null){var h=y.getTextContent();if(p===!1)h&&y.removeTextContent();else{p=v.normal.conOpt=p||{type:"text"},h?h.clearStates():(h=V(p),y.setTextContent(h)),B(null,h,x,p,null,b,T);for(var S=p&&p.style,m=0;m<O.length;m++){var M=O[m];if(M!==L){var A=v[M].conOpt;it(M,h,0,Y(p,A,M),null)}}S?h.dirty():h.markRedraw()}}}}(d,n,a,i,I,z),function(y,x,w,b,T){var v=w.clipPath;if(v===!1)y&&y.getClipPath()&&y.removeClipPath();else if(v){var p=y.getClipPath();p&&ot(p,v,b)&&(p=null),p||(p=V(v),y.setClipPath(p)),B(null,p,x,v,null,b,T)}}(d,n,a,i,I),B(e,d,n,a,z,i,I),D(a,"info")&&(R(d).info=a.info);for(var C=0;C<O.length;C++){var P=O[C];if(P!==L){var _=F(a,P);it(P,d,0,Y(a,_,P),z)}}return function(y,x,w){if(!y.isGroup){var b=y,T=w.currentZ,v=w.currentZLevel;b.z=T,b.zlevel=v;var p=x.z2;p!=null&&(b.z2=p||0);for(var l=0;l<O.length;l++)$t(b,x,O[l])}}(d,a,i),a.type==="group"&&function(y,x,w,b,T){var v=b.children,p=v?v.length:0,l=b.$mergeChildren,o=l==="byName"||b.diffChildrenByName,f=l===!1;if(!(!p&&!o&&!f)){if(o)return h={api:y,oldChildren:x.children()||[],newChildren:v||[],dataIndex:w,seriesModel:T,group:x},void new Pt(h.oldChildren,h.newChildren,st,st,h).add(ut).update(ut).remove(ne).execute();var h;f&&x.removeAll();for(var S=0;S<p;S++){var m=v[S],M=x.childAt(S);m?(m.ignore==null&&(m.ignore=!1),j(y,M,w,m,T,x)):M.ignore=!0}for(var A=x.childCount()-1;A>=S;A--){var k=x.childAt(A);ee(x,k,T)}}}(e,d,n,a,i),s>=0?r.replaceAt(d,s):r.add(d),d}function ot(e,t,n){var a,i=R(e),r=t.type,s=t.shape,u=t.style;return n.isUniversalTransitionEnabled()||r!=null&&r!==i.customGraphicType||r==="path"&&(a=s)&&(D(a,"pathData")||D(a,"d"))&&dt(s)!==i.customPathData||r==="image"&&D(u,"image")&&u.image!==i.customImagePath}function lt(e,t,n){var a=t?F(e,t):e,i=t?Y(e,a,E):e.style,r=e.type,s=a?a.textConfig:null,u=e.textContent,c=u?t?F(u,t):u:null;if(i&&(n.isLegacy||Ft(i,r,!!s,!!c))){n.isLegacy=!0;var g=Ht(i,r,!t);!s&&g.textConfig&&(s=g.textConfig),!c&&g.textContent&&(c=g.textContent)}if(!t&&c){var I=c;!I.type&&(I.type="text")}var d=t?n[t]:n.normal;d.cfg=s,d.conOpt=c}function F(e,t){return t?e?e[t]:null:e}function Y(e,t,n){var a=t&&t.style;return a==null&&n===E&&e&&(a=e.styleEmphasis),a}function ee(e,t,n){t&&K(t,R(e).option,n)}function st(e,t){var n=e&&e.name;return n??Qt+t}function ut(e,t){var n=this.context,a=e!=null?n.newChildren[e]:null,i=t!=null?n.oldChildren[t]:null;j(n.api,i,n.dataIndex,a,n.seriesModel,n.group)}function ne(e){var t=this.context,n=t.oldChildren[e];n&&K(n,R(n).option,t.seriesModel)}function dt(e){return e&&(e.pathData||e.d)}function le(e){e.registerChartView(jt),e.registerSeriesModel(Nt)}export{le as install};
