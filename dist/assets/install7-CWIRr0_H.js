import{e as j,bU as oe,h as N,aB as J,ce as ae,N as le,ay as Y,cf as se,d as X,w as Z,bK as q,V as K,cg as O,aa as W,ag as ge,D as he,bT as ee,bS as te,K as ie,y as re,bR as de,ch as ce,bO as pe,bI as ue,G as ye,U as fe,ao as me}from"./index-B3HKDY-B.js";import{e as ne}from"./sausage-CWdzHbBn.js";import{s as ve}from"./createSeriesDataSimply-BtvIqVi0.js";var we=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},xe=function(C){function a(e){var r=C.call(this,e)||this;return r.type="pointer",r}return j(a,C),a.prototype.getDefaultShape=function(){return new we},a.prototype.buildPath=function(e,r){var f=Math.cos,l=Math.sin,t=r.r,s=r.width,n=r.angle,w=r.x-f(n)*s*(s>=t/3?1:2),S=r.y-l(n)*s*(s>=t/3?1:2);n=r.angle-Math.PI/2,e.moveTo(w,S),e.lineTo(r.x+f(n)*s,r.y+l(n)*s),e.lineTo(r.x+f(r.angle)*t,r.y+l(r.angle)*t),e.lineTo(r.x-f(n)*s,r.y-l(n)*s),e.lineTo(w,S)},a}(oe);function $(C,a){var e=C==null?"":C+"";return a&&(ye(a)?e=a.replace("{value}",e):fe(a)&&(e=a(C))),e}var Me=function(C){function a(){var e=C!==null&&C.apply(this,arguments)||this;return e.type=a.type,e}return j(a,C),a.prototype.render=function(e,r,f){this.group.removeAll();var l=e.get(["axisLine","lineStyle","color"]),t=function(s,n){var w=s.get("center"),S=n.getWidth(),m=n.getHeight(),b=Math.min(S,m);return{cx:N(w[0],n.getWidth()),cy:N(w[1],n.getHeight()),r:N(s.get("radius"),b/2)}}(e,f);this._renderMain(e,r,f,l,t),this._data=e.getData()},a.prototype.dispose=function(){},a.prototype._renderMain=function(e,r,f,l,t){var s=this.group,n=e.get("clockwise"),w=-e.get("startAngle")/180*Math.PI,S=-e.get("endAngle")/180*Math.PI,m=e.getModel("axisLine"),b=m.get("roundCap")?ne:J,V=m.get("show"),P=m.getModel("lineStyle"),T=P.get("width"),h=[w,S];ae(h,!n);for(var u=(S=h[1])-(w=h[0]),g=w,_=[],z=0;V&&z<l.length;z++){var k=new b({shape:{startAngle:g,endAngle:S=w+u*Math.min(Math.max(l[z][0],0),1),cx:t.cx,cy:t.cy,clockwise:n,r0:t.r-T,r:t.r},silent:!0});k.setStyle({fill:l[z][1]}),k.setStyle(P.getLineStyle(["color","width"])),_.push(k),g=S}_.reverse(),le(_,function(I){return s.add(I)});var x=function(I){if(I<=0)return l[0][1];var L;for(L=0;L<l.length;L++)if(l[L][0]>=I&&(L===0?0:l[L-1][0])<I)return l[L][1];return l[L-1][1]};this._renderTicks(e,r,f,x,t,w,S,n,T),this._renderTitleAndDetail(e,r,f,x,t),this._renderAnchor(e,t),this._renderPointer(e,r,f,x,t,w,S,n,T)},a.prototype._renderTicks=function(e,r,f,l,t,s,n,w,S){for(var m,b,V=this.group,P=t.cx,T=t.cy,h=t.r,u=+e.get("min"),g=+e.get("max"),_=e.getModel("splitLine"),z=e.getModel("axisTick"),k=e.getModel("axisLabel"),x=e.get("splitNumber"),I=z.get("splitNumber"),L=N(_.get("length"),h),G=N(z.get("length"),h),i=s,v=(n-s)/x,y=v/I,d=_.getModel("lineStyle").getLineStyle(),M=z.getModel("lineStyle").getLineStyle(),A=_.get("distance"),o=0;o<=x;o++){if(m=Math.cos(i),b=Math.sin(i),_.get("show")){var c=new Y({shape:{x1:m*(h-(p=A?A+S:S))+P,y1:b*(h-p)+T,x2:m*(h-L-p)+P,y2:b*(h-L-p)+T},style:d,silent:!0});d.stroke==="auto"&&c.setStyle({stroke:l(o/x)}),V.add(c)}if(k.get("show")){var p=k.get("distance")+A,E=$(se(o/x*(g-u)+u),k.get("formatter")),D=l(o/x),U=m*(h-L-p)+P,Q=b*(h-L-p)+T,R=k.get("rotate"),B=0;R==="radial"?(B=-i+2*Math.PI)>Math.PI/2&&(B+=Math.PI):R==="tangential"?B=-i-Math.PI/2:me(R)&&(B=R*Math.PI/180),B===0?V.add(new X({style:Z(k,{text:E,x:U,y:Q,verticalAlign:b<-.8?"top":b>.8?"bottom":"middle",align:m<-.4?"left":m>.4?"right":"center"},{inheritColor:D}),silent:!0})):V.add(new X({style:Z(k,{text:E,x:U,y:Q,verticalAlign:"middle",align:"center"},{inheritColor:D}),silent:!0,originX:U,originY:Q,rotation:B}))}if(z.get("show")&&o!==x){p=(p=z.get("distance"))?p+S:S;for(var F=0;F<=I;F++){m=Math.cos(i),b=Math.sin(i);var H=new Y({shape:{x1:m*(h-p)+P,y1:b*(h-p)+T,x2:m*(h-G-p)+P,y2:b*(h-G-p)+T},silent:!0,style:M});M.stroke==="auto"&&H.setStyle({stroke:l((o+F/I)/x)}),V.add(H),i+=y}i-=y}else i+=v}},a.prototype._renderPointer=function(e,r,f,l,t,s,n,w,S){var m=this.group,b=this._data,V=this._progressEls,P=[],T=e.get(["pointer","show"]),h=e.getModel("progress"),u=h.get("show"),g=e.getData(),_=g.mapDimension("value"),z=+e.get("min"),k=+e.get("max"),x=[z,k],I=[s,n];function L(i,v){var y,d=g.getItemModel(i).getModel("pointer"),M=N(d.get("width"),t.r),A=N(d.get("length"),t.r),o=e.get(["pointer","icon"]),c=d.get("offsetCenter"),p=N(c[0],t.r),E=N(c[1],t.r),D=d.get("keepAspect");return(y=o?ie(o,p-M/2,E-A,M,A,null,D):new xe({shape:{angle:-Math.PI/2,width:M,r:A,x:p,y:E}})).rotation=-(v+Math.PI/2),y.x=t.cx,y.y=t.cy,y}function G(i,v){var y=h.get("roundCap")?ne:J,d=h.get("overlap"),M=d?h.get("width"):S/g.count(),A=d?t.r-M:t.r-(i+1)*M,o=d?t.r:t.r-i*M,c=new y({shape:{startAngle:s,endAngle:v,cx:t.cx,cy:t.cy,clockwise:w,r0:A,r:o}});return d&&(c.z2=k-g.get(_,i)%k),c}(u||T)&&(g.diff(b).add(function(i){var v=g.get(_,i);if(T){var y=L(i,s);q(y,{rotation:-((isNaN(+v)?I[0]:K(v,x,I,!0))+Math.PI/2)},e),m.add(y),g.setItemGraphicEl(i,y)}if(u){var d=G(i,s),M=h.get("clip");q(d,{shape:{endAngle:K(v,x,I,M)}},e),m.add(d),O(e.seriesIndex,g.dataType,i,d),P[i]=d}}).update(function(i,v){var y=g.get(_,i);if(T){var d=b.getItemGraphicEl(v),M=d?d.rotation:s,A=L(i,M);A.rotation=M,W(A,{rotation:-((isNaN(+y)?I[0]:K(y,x,I,!0))+Math.PI/2)},e),m.add(A),g.setItemGraphicEl(i,A)}if(u){var o=V[v],c=G(i,o?o.shape.endAngle:s),p=h.get("clip");W(c,{shape:{endAngle:K(y,x,I,p)}},e),m.add(c),O(e.seriesIndex,g.dataType,i,c),P[i]=c}}).execute(),g.each(function(i){var v=g.getItemModel(i),y=v.getModel("emphasis"),d=y.get("focus"),M=y.get("blurScope"),A=y.get("disabled");if(T){var o=g.getItemGraphicEl(i),c=g.getItemVisual(i,"style"),p=c.fill;if(o instanceof ge){var E=o.style;o.useStyle(he({image:E.image,x:E.x,y:E.y,width:E.width,height:E.height},c))}else o.useStyle(c),o.type!=="pointer"&&o.setColor(p);o.setStyle(v.getModel(["pointer","itemStyle"]).getItemStyle()),o.style.fill==="auto"&&o.setStyle("fill",l(K(g.get(_,i),x,[0,1],!0))),o.z2EmphasisLift=0,ee(o,v),te(o,d,M,A)}if(u){var D=P[i];D.useStyle(g.getItemVisual(i,"style")),D.setStyle(v.getModel(["progress","itemStyle"]).getItemStyle()),D.z2EmphasisLift=0,ee(D,v),te(D,d,M,A)}}),this._progressEls=P)},a.prototype._renderAnchor=function(e,r){var f=e.getModel("anchor");if(f.get("show")){var l=f.get("size"),t=f.get("icon"),s=f.get("offsetCenter"),n=f.get("keepAspect"),w=ie(t,r.cx-l/2+N(s[0],r.r),r.cy-l/2+N(s[1],r.r),l,l,null,n);w.z2=f.get("showAbove")?1:0,w.setStyle(f.getModel("itemStyle").getItemStyle()),this.group.add(w)}},a.prototype._renderTitleAndDetail=function(e,r,f,l,t){var s=this,n=e.getData(),w=n.mapDimension("value"),S=+e.get("min"),m=+e.get("max"),b=new re,V=[],P=[],T=e.isAnimationEnabled(),h=e.get(["pointer","showAbove"]);n.diff(this._data).add(function(u){V[u]=new X({silent:!0}),P[u]=new X({silent:!0})}).update(function(u,g){V[u]=s._titleEls[g],P[u]=s._detailEls[g]}).execute(),n.each(function(u){var g=n.getItemModel(u),_=n.get(w,u),z=new re,k=l(K(_,[S,m],[0,1],!0)),x=g.getModel("title");if(x.get("show")){var I=x.get("offsetCenter"),L=t.cx+N(I[0],t.r),G=t.cy+N(I[1],t.r);(c=V[u]).attr({z2:h?0:2,style:Z(x,{x:L,y:G,text:n.getName(u),align:"center",verticalAlign:"middle"},{inheritColor:k})}),z.add(c)}var i=g.getModel("detail");if(i.get("show")){var v=i.get("offsetCenter"),y=t.cx+N(v[0],t.r),d=t.cy+N(v[1],t.r),M=N(i.get("width"),t.r),A=N(i.get("height"),t.r),o=e.get(["progress","show"])?n.getItemVisual(u,"style").fill:k,c=P[u],p=i.get("formatter");c.attr({z2:h?0:2,style:Z(i,{x:y,y:d,text:$(_,p),width:isNaN(M)?null:M,height:isNaN(A)?null:A,align:"center",verticalAlign:"middle"},{inheritColor:o})}),de(c,{normal:i},_,function(E){return $(E,p)}),T&&ce(c,u,n,e,{getFormattedLabel:function(E,D,U,Q,R,B){return $(B?B.interpolatedValue:_,p)}}),z.add(c)}b.add(z)}),this.group.add(b),this._titleEls=V,this._detailEls=P},a.type="gauge",a}(pe),Se=function(C){function a(){var e=C!==null&&C.apply(this,arguments)||this;return e.type=a.type,e.visualStyleAccessPath="itemStyle",e}return j(a,C),a.prototype.getInitialData=function(e,r){return ve(this,["value"])},a.type="series.gauge",a.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},a}(ue);function Pe(C){C.registerChartView(Me),C.registerSeriesModel(Se)}export{Pe as install};
