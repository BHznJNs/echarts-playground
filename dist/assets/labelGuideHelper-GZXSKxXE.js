import{df as L,ad as I,r as N,I as q,cA as C,S as h,dg as G,dh as w}from"./index-B3HKDY-B.js";function S(r,t,o,e,a,s,i,f){var y=a-r,d=s-t,u=o-r,c=e-t,A=Math.sqrt(u*u+c*c),M=(y*(u/=A)+d*(c/=A))/A;M*=A;var b=i[0]=r+M*u,P=i[1]=t+M*c;return Math.sqrt((b-a)*(b-a)+(P-s)*(P-s))}var m=new h,n=new h,l=new h,g=new h,x=new h,p=[],v=new h;function D(r,t){if(t<=180&&t>0){t=t/180*Math.PI,m.fromArray(r[0]),n.fromArray(r[1]),l.fromArray(r[2]),h.sub(g,m,n),h.sub(x,l,n);var o=g.len(),e=x.len();if(!(o<.001||e<.001)){g.scale(1/o),x.scale(1/e);var a=g.dot(x);if(Math.cos(t)<a){var s=S(n.x,n.y,l.x,l.y,m.x,m.y,p);v.fromArray(p),v.scaleAndAdd(x,s/Math.tan(Math.PI-t));var i=l.x!==n.x?(v.x-n.x)/(l.x-n.x):(v.y-n.y)/(l.y-n.y);if(isNaN(i))return;i<0?h.copy(v,n):i>1&&h.copy(v,l),v.toArray(r[1])}}}}function V(r,t,o){if(o<=180&&o>0){o=o/180*Math.PI,m.fromArray(r[0]),n.fromArray(r[1]),l.fromArray(r[2]),h.sub(g,n,m),h.sub(x,l,n);var e=g.len(),a=x.len();if(!(e<.001||a<.001)&&(g.scale(1/e),x.scale(1/a),g.dot(t)<Math.cos(o))){var s=S(n.x,n.y,l.x,l.y,m.x,m.y,p);v.fromArray(p);var i=Math.PI/2,f=i+Math.acos(x.dot(t))-o;if(f>=i)h.copy(v,l);else{v.scaleAndAdd(x,s/Math.tan(Math.PI/2-f));var y=l.x!==n.x?(v.x-n.x)/(l.x-n.x):(v.y-n.y)/(l.y-n.y);if(isNaN(y))return;y<0?h.copy(v,n):y>1&&h.copy(v,l)}v.toArray(r[1])}}}function T(r,t,o,e){var a=o==="normal",s=a?r:r.ensureState(o);s.ignore=t;var i=e.get("smooth");i&&i===!0&&(i=.3),s.shape=s.shape||{},i>0&&(s.shape.smooth=i);var f=e.getModel("lineStyle").getLineStyle();a?r.useStyle(f):s.style=f}function z(r,t){var o=t.smooth,e=t.points;if(e)if(r.moveTo(e[0][0],e[0][1]),o>0&&e.length>=3){var a=G(e[0],e[1]),s=G(e[1],e[2]);if(!a||!s)return r.lineTo(e[1][0],e[1][1]),void r.lineTo(e[2][0],e[2][1]);var i=Math.min(a,s)*o,f=w([],e[1],e[0],i/a),y=w([],e[1],e[2],i/s),d=w([],f,y,.5);r.bezierCurveTo(f[0],f[1],f[0],f[1],d[0],d[1]),r.bezierCurveTo(y[0],y[1],y[0],y[1],e[2][0],e[2][1])}else for(var u=1;u<e.length;u++)r.lineTo(e[u][0],e[u][1])}function j(r,t,o){var e=r.getTextGuideLine(),a=r.getTextContent();if(a){for(var s=t.normal,i=s.get("show"),f=a.ignore,y=0;y<L.length;y++){var d=L[y],u=t[d],c=d==="normal";if(u){var A=u.get("show");if((c?f:I(a.states[d]&&a.states[d].ignore,f))||!I(A,i)){var M=c?e:e&&e.states[d];M&&(M.ignore=!0),e&&T(e,!0,d,u);continue}e||(e=new N,r.setTextGuideLine(e),c||!f&&i||T(e,!0,"normal",t.normal),r.stateProxy&&(e.stateProxy=r.stateProxy)),T(e,!1,d,u)}}if(e){q(e.style,o),e.style.fill=null;var b=s.get("showAbove");(r.textGuideLineConfig=r.textGuideLineConfig||{}).showAbove=b||!1,e.buildPath=z}}else e&&r.removeTextGuideLine()}function k(r,t){t=t||"labelLine";for(var o={normal:r.getModel(t)},e=0;e<C.length;e++){var a=C[e];o[a]=r.getModel([a,t])}return o}export{j as A,k as b,D as c,V as g};
