import{R as c,N as s,a2 as o,cG as l,D as f,E as h,ag as m}from"./index-B7CpzWKR.js";var i=c();function w(t){var a=t.mainData,n=t.datas;n||(n={main:a},t.datasAttr={main:"data"}),t.datas=t.mainData=null,e(a,n,t),s(n,function(r){s(a.TRANSFERABLE_METHODS,function(u){r.wrapMethod(u,o(p,t))})}),a.wrapMethod("cloneShallow",o(A,t)),s(a.CHANGABLE_METHODS,function(r){a.wrapMethod(r,o(D,t))}),l(n[a.dataType]===a)}function p(t,a){if(i(r=this).mainData===r){var n=f({},i(this).datas);n[this.dataType]=a,e(a,n,t)}else d(a,this.dataType,i(this).mainData,t);var r;return a}function D(t,a){return t.struct&&t.struct.update(),a}function A(t,a){return s(i(a).datas,function(n,r){n!==a&&d(n.cloneShallow(),r,a,t)}),a}function T(t){var a=i(this).mainData;return t==null||a==null?a:i(a).datas[t]}function v(){var t=i(this).mainData;return t==null?[{data:t}]:h(m(i(t).datas),function(a){return{type:a,data:i(t).datas[a]}})}function e(t,a,n){i(t).datas={},s(a,function(r,u){d(r,u,t,n)})}function d(t,a,n,r){i(n).datas[a]=t,i(t).mainData=n,t.dataType=a,r.struct&&(t[r.structAttr]=r.struct,r.struct[r.datasAttr[a]]=t),t.getLinkedData=T,t.getLinkedDataAll=v}export{w as d};
