import{e as v,z as u,h,cC as p,d1 as _,aE as x,d2 as w,cq as C,d3 as f}from"./index-B3HKDY-B.js";var l=p,z=function(n){function o(t){var r=n.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new f,r._rawTransformable=new f,r.name=t,r}return v(o,n),o.prototype.setBoundingRect=function(t,r,e,a){return this._rect=new u(t,r,e,a),this._rect},o.prototype.getBoundingRect=function(){return this._rect},o.prototype.setViewRect=function(t,r,e,a){this._transformTo(t,r,e,a),this._viewRect=new u(t,r,e,a)},o.prototype._transformTo=function(t,r,e,a){var i=this.getBoundingRect(),s=this._rawTransformable;s.transform=i.calculateTransform(new u(t,r,e,a));var c=s.parent;s.parent=null,s.decomposeTransform(),s.parent=c,this._updateTransform()},o.prototype.setCenter=function(t,r){t&&(this._center=[h(t[0],r.getWidth()),h(t[1],r.getHeight())],this._updateCenterAndZoom())},o.prototype.setZoom=function(t){t=t||1;var r=this.zoomLimit;r&&(r.max!=null&&(t=Math.min(r.max,t)),r.min!=null&&(t=Math.max(r.min,t))),this._zoom=t,this._updateCenterAndZoom()},o.prototype.getDefaultCenter=function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},o.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},o.prototype.getZoom=function(){return this._zoom||1},o.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},o.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,e=this.getDefaultCenter(),a=this.getCenter(),i=this.getZoom();a=p([],a,t),e=p([],e,t),r.originX=a[0],r.originY=a[1],r.x=e[0]-a[0],r.y=e[1]-a[1],r.scaleX=r.scaleY=i,this._updateTransform()},o.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),_(this.transform||(this.transform=[]),r.transform||x()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],w(this.invTransform,this.transform),this.decomposeTransform()},o.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,e=new f;return e.transform=r.transform,e.decomposeTransform(),{roam:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},o.prototype.getViewRect=function(){return this._viewRect},o.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},o.prototype.dataToPoint=function(t,r,e){var a=r?this._rawTransform:this.transform;return e=e||[],a?l(e,t,a):C(e,t)},o.prototype.pointToData=function(t){var r=this.invTransform;return r?l([],t,r):[t[0],t[1]]},o.prototype.convertToPixel=function(t,r,e){var a=T(r);return a===this?a.dataToPoint(e):null},o.prototype.convertFromPixel=function(t,r,e){var a=T(r);return a===this?a.pointToData(e):null},o.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},o.dimensions=["x","y"],o}(f);function T(n){var o=n.seriesModel;return o?o.coordinateSystem:null}function b(n,o,t){var r=n.target;r.x+=o,r.y+=t,r.dirty()}function P(n,o,t,r){var e=n.target,a=n.zoomLimit,i=n.zoom=n.zoom||1;if(i*=o,a){var s=a.min||0,c=a.max||1/0;i=Math.max(Math.min(c,i),s)}var m=i/n.zoom;n.zoom=i,e.x-=(t-e.x)*(m-1),e.y-=(r-e.y)*(m-1),e.scaleX*=m,e.scaleY*=m,e.dirty()}function d(n,o){return n.pointToProjected?n.pointToProjected(o):n.pointToData(o)}function X(n,o,t,r){var e=n.getZoom(),a=n.getCenter(),i=o.zoom,s=n.projectedToPoint?n.projectedToPoint(a):n.dataToPoint(a);if(o.dx!=null&&o.dy!=null&&(s[0]-=o.dx,s[1]-=o.dy,n.setCenter(d(n,s),r)),i!=null){if(t){var c=t.min||0,m=t.max||1/0;i=Math.max(Math.min(e*i,m),c)/e}n.scaleX*=i,n.scaleY*=i;var y=(o.originX-n.x)*(i-1),g=(o.originY-n.y)*(i-1);n.x-=y,n.y-=g,n.updateTransform(),n.setCenter(d(n,s),r),n.setZoom(i*e)}return{center:n.getCenter(),zoom:n.getZoom()}}export{X as T,z as f,P as h,b as p};
