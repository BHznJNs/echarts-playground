import{aV as e,e as t,bo as o,w as i,bd as s,X as n,aG as r,d as a,B as l,_ as p,bQ as d}from"./index.js";function x(t,o,i){i=i||{};var s=t.coordinateSystem,n=o.axis,r={},a=n.getAxesOnZeroOf()[0],l=n.position,p=a?"onZero":l,d=n.dim,x=s.getRect(),u=[x.x,x.x+x.width,x.y,x.y+x.height],c={left:0,right:1,top:0,bottom:1,onZero:2},g=o.get("offset")||0,f="x"===d?[u[2]-g,u[3]+g]:[u[0]-g,u[1]+g];if(a){var v=a.toGlobalCoord(a.dataToCoord(0));f[c.onZero]=Math.max(Math.min(v,f[1]),f[0])}r.position=["y"===d?f[c[p]]:u[0],"x"===d?f[c[p]]:u[3]],r.rotation=Math.PI/2*("x"===d?0:1);r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,left:-1,right:1}[l],r.labelOffset=a?f[c[l]]-f[c.onZero]:0,o.get(["axisTick","inside"])&&(r.tickDirection=-r.tickDirection),e(i.labelInside,o.get(["axisLabel","inside"]))&&(r.labelDirection=-r.labelDirection);var h=o.get(["axisLabel","rotate"]);return r.labelRotate="top"===p?-h:h,r.z2=1,r}function u(e){return"cartesian2d"===e.get("coordinateSystem")}function c(e){var i={xAxisModel:null,yAxisModel:null};return t(i,(function(t,s){var n=s.replace(/Model$/,""),r=e.getReferringComponents(n,o).models[0];i[s]=r})),i}function g(e,o){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(e,o,a){var l=o.getComponent("tooltip"),p=o.getComponent("axisPointer"),d=p.get("link",!0)||[],x=[];t(a.getCoordinateSystems(),(function(a){if(a.axisPointerEnabled){var u=y(a.model),c=e.coordSysAxesInfo[u]={};e.coordSysMap[u]=a;var g=a.model.getModel("tooltip",l);if(t(a.getAxes(),i(A,!1,null)),a.getTooltipAxes&&l&&g.get("show")){var v="axis"===g.get("trigger"),m="cross"===g.get(["axisPointer","type"]),P=a.getTooltipAxes(g.get(["axisPointer","axis"]));(v||m)&&t(P.baseAxes,i(A,!m||"cross",v)),m&&t(P.otherAxes,i(A,"cross",!1))}}function A(i,l,u){var v=u.model.getModel("axisPointer",p),m=v.get("show");if(m&&("auto"!==m||i||h(v))){null==l&&(l=v.get("triggerTooltip")),v=i?function(e,o,i,a,l,p){var d=o.getModel("axisPointer"),x={};t(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(e){x[e]=s(d.get(e))})),x.snap="category"!==e.type&&!!p,"cross"===d.get("type")&&(x.type="line");var u=x.label||(x.label={});if(null==u.show&&(u.show=!1),"cross"===l){var c=d.get(["label","show"]);if(u.show=null==c||c,!p){var g=x.lineStyle=d.get("crossStyle");g&&n(u,g.textStyle)}}return e.model.getModel("axisPointer",new r(x,i,a))}(u,g,p,o,i,l):v;var P=v.get("snap"),A=v.get("triggerEmphasis"),b=y(u.model),C=l||P||"category"===u.type,I=e.axesInfo[b]={key:b,axis:u,coordSys:a,axisPointerModel:v,triggerTooltip:l,triggerEmphasis:A,involveSeries:C,snap:P,useHandle:h(v),seriesModels:[],linkGroup:null};c[b]=I,e.seriesInvolved=e.seriesInvolved||C;var M=function(e,t){for(var o=t.model,i=t.dim,s=0;s<e.length;s++){var n=e[s]||{};if(f(n[i+"AxisId"],o.id)||f(n[i+"AxisIndex"],o.componentIndex)||f(n[i+"AxisName"],o.name))return s}}(d,u);if(null!=M){var S=x[M]||(x[M]={axesInfo:{}});S.axesInfo[b]=I,S.mapper=d[M].mapper,I.linkGroup=S}}}}))}(a,e,o),a.seriesInvolved&&function(e,o){o.eachSeries((function(o){var i=o.coordinateSystem,s=o.get(["tooltip","trigger"],!0),n=o.get(["tooltip","show"],!0);i&&"none"!==s&&!1!==s&&"item"!==s&&!1!==n&&!1!==o.get(["axisPointer","show"],!0)&&t(e.coordSysAxesInfo[y(i.model)],(function(e){var t=e.axis;i.getAxis(t.dim)===t&&(e.seriesModels.push(o),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=o.getData().count())}))}))}(a,e),a}function f(e,t){return"all"===e||a(e)&&l(e,t)>=0||e===t}function v(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[y(e)]}function h(e){return!!e.get(["handle","show"])}function y(e){return e.type+"||"+e.id}var m={},P=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return p(t,e),t.prototype.render=function(t,o,i,s){this.axisPointerClass&&function(e){var t=v(e);if(t){var o=t.axisPointerModel,i=t.axis.scale,s=o.option,n=o.get("status"),r=o.get("value");null!=r&&(r=i.parse(r));var a=h(o);null==n&&(s.status=a?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==r||r>l[1])&&(r=l[1]),r<l[0]&&(r=l[0]),s.value=r,a&&(s.status=t.axis.scale.isBlank()?"hide":"show")}}(t),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},t.prototype.updateAxisPointer=function(e,t,o,i){this._doUpdateAxisPointerClass(e,o,!1)},t.prototype.remove=function(e,t){var o=this._axisPointer;o&&o.remove(t)},t.prototype.dispose=function(t,o){this._disposeAxisPointer(o),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,o,i){var s=t.getAxisPointerClass(this.axisPointerClass);if(s){var n=function(e){var t=v(e);return t&&t.axisPointerModel}(e);n?(this._axisPointer||(this._axisPointer=new s)).render(e,n,o,i):this._disposeAxisPointer(o)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,t){m[e]=t},t.getAxisPointerClass=function(e){return e&&m[e]},t.type="axis",t}(d);export{P as A,g as c,c as f,v as g,u as i,x as l,y as m};
