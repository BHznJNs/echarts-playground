import{a0 as t,e,bL as i,cm as o,cx as r,V as n,h as a,aa as l,P as s,B as f,cy as d,cz as x,cA as u,W as h,bv as c,d as g,bg as v}from"./index.js";function S(e,i,o,r){return e&&(e.legacy||!1!==e.legacy&&!o&&!r&&"tspan"!==i&&("text"===i||t(e,"text")))}function y(i,o,r){var n,a,l,s=i;if("text"===o)l=s;else{l={},t(s,"text")&&(l.text=s.text),t(s,"rich")&&(l.rich=s.rich),t(s,"textFill")&&(l.fill=s.textFill),t(s,"textStroke")&&(l.stroke=s.textStroke),t(s,"fontFamily")&&(l.fontFamily=s.fontFamily),t(s,"fontSize")&&(l.fontSize=s.fontSize),t(s,"fontStyle")&&(l.fontStyle=s.fontStyle),t(s,"fontWeight")&&(l.fontWeight=s.fontWeight),a={type:"text",style:l,silent:!0},n={};var f=t(s,"textPosition");r?n.position=f?s.textPosition:"inside":f&&(n.position=s.textPosition),t(s,"textPosition")&&(n.position=s.textPosition),t(s,"textOffset")&&(n.offset=s.textOffset),t(s,"textRotation")&&(n.rotation=s.textRotation),t(s,"textDistance")&&(n.distance=s.textDistance)}return p(l,i),e(l.rich,(function(t){p(t,t)})),{textConfig:n,textContent:a}}function p(e,i){i&&(i.font=i.textFont||i.font,t(i,"textStrokeWidth")&&(e.lineWidth=i.textStrokeWidth),t(i,"textAlign")&&(e.align=i.textAlign),t(i,"textVerticalAlign")&&(e.verticalAlign=i.textVerticalAlign),t(i,"textLineHeight")&&(e.lineHeight=i.textLineHeight),t(i,"textWidth")&&(e.width=i.textWidth),t(i,"textHeight")&&(e.height=i.textHeight),t(i,"textBackgroundColor")&&(e.backgroundColor=i.textBackgroundColor),t(i,"textPadding")&&(e.padding=i.textPadding),t(i,"textBorderColor")&&(e.borderColor=i.textBorderColor),t(i,"textBorderWidth")&&(e.borderWidth=i.textBorderWidth),t(i,"textBorderRadius")&&(e.borderRadius=i.textBorderRadius),t(i,"textBoxShadowColor")&&(e.shadowColor=i.textBoxShadowColor),t(i,"textBoxShadowBlur")&&(e.shadowBlur=i.textBoxShadowBlur),t(i,"textBoxShadowOffsetX")&&(e.shadowOffsetX=i.textBoxShadowOffsetX),t(i,"textBoxShadowOffsetY")&&(e.shadowOffsetY=i.textBoxShadowOffsetY))}function w(t,i,o){var r=t;r.textPosition=r.textPosition||o.position||"inside",null!=o.offset&&(r.textOffset=o.offset),null!=o.rotation&&(r.textRotation=o.rotation),null!=o.distance&&(r.textDistance=o.distance);var n=r.textPosition.indexOf("inside")>=0,a=t.fill||"#000";B(r,i);var l=null==r.textFill;return n?l&&(r.textFill=o.insideFill||"#fff",!r.textStroke&&o.insideStroke&&(r.textStroke=o.insideStroke),!r.textStroke&&(r.textStroke=a),null==r.textStrokeWidth&&(r.textStrokeWidth=2)):(l&&(r.textFill=t.fill||o.outsideFill||"#000"),!r.textStroke&&o.outsideStroke&&(r.textStroke=o.outsideStroke)),r.text=i.text,r.rich=i.rich,e(i.rich,(function(t){B(t,t)})),r}function B(e,i){i&&(t(i,"fill")&&(e.textFill=i.fill),t(i,"stroke")&&(e.textStroke=i.fill),t(i,"lineWidth")&&(e.textStrokeWidth=i.lineWidth),t(i,"font")&&(e.font=i.font),t(i,"fontStyle")&&(e.fontStyle=i.fontStyle),t(i,"fontWeight")&&(e.fontWeight=i.fontWeight),t(i,"fontSize")&&(e.fontSize=i.fontSize),t(i,"fontFamily")&&(e.fontFamily=i.fontFamily),t(i,"align")&&(e.textAlign=i.align),t(i,"verticalAlign")&&(e.textVerticalAlign=i.verticalAlign),t(i,"lineHeight")&&(e.textLineHeight=i.lineHeight),t(i,"width")&&(e.textWidth=i.width),t(i,"height")&&(e.textHeight=i.height),t(i,"backgroundColor")&&(e.textBackgroundColor=i.backgroundColor),t(i,"padding")&&(e.textPadding=i.padding),t(i,"borderColor")&&(e.textBorderColor=i.borderColor),t(i,"borderWidth")&&(e.textBorderWidth=i.borderWidth),t(i,"borderRadius")&&(e.textBorderRadius=i.borderRadius),t(i,"shadowColor")&&(e.textBoxShadowColor=i.shadowColor),t(i,"shadowBlur")&&(e.textBoxShadowBlur=i.shadowBlur),t(i,"shadowOffsetX")&&(e.textBoxShadowOffsetX=i.shadowOffsetX),t(i,"shadowOffsetY")&&(e.textBoxShadowOffsetY=i.shadowOffsetY),t(i,"textShadowColor")&&(e.textShadowColor=i.textShadowColor),t(i,"textShadowBlur")&&(e.textShadowBlur=i.textShadowBlur),t(i,"textShadowOffsetX")&&(e.textShadowOffsetX=i.textShadowOffsetX),t(i,"textShadowOffsetY")&&(e.textShadowOffsetY=i.textShadowOffsetY))}var m={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},k=i(m);o(r,(function(t,e){return t[e]=1,t}),{}),r.join(", ");var W=["","style","shape","extra"],C=n();function O(t,e,i,o,r){var n=t+"Animation",l=u(t,o,r)||{},s=C(e).userDuring;return l.duration>0&&(l.during=s?h(Y,{el:e,userDuring:s}):null,l.setToFinal=!0,l.scope=t),a(l,i[n]),l}function b(o,n,d,x){var u=(x=x||{}).dataIndex,h=x.isInit,g=x.clearStyle,v=d.isAnimationEnabled(),S=C(o),y=n.style;S.userDuring=n.during;var p={},w={};if(function(t,e,i){for(var o=0;o<k.length;o++){var n=k[o],a=m[n],l=e[n];l&&(i[a[0]]=l[0],i[a[1]]=l[1])}for(o=0;o<r.length;o++){var s=r[o];null!=e[s]&&(i[s]=e[s])}}(0,n,w),D("shape",n,w),D("extra",n,w),!h&&v&&(function(t,e,i){for(var o=e.transition,n=A(o)?r:c(o||[]),a=0;a<n.length;a++){var l=n[a];if("style"!==l&&"shape"!==l&&"extra"!==l){var s=t[l];i[l]=s}}}(o,n,p),R("shape",o,n,p),R("extra",o,n,p),function(t,e,o,r){if(!o)return;var n,a=t.style;if(a){var l=o.transition,s=e.transition;if(l&&!A(l)){var d=c(l);!n&&(n=r.style={});for(var x=0;x<d.length;x++){var u=a[S=d[x]];n[S]=u}}else if(t.getAnimationStyleProps&&(A(s)||A(l)||f(s,"style")>=0)){var h=t.getAnimationStyleProps(),g=h?h.style:null;if(g){!n&&(n=r.style={});var v=i(o);for(x=0;x<v.length;x++){var S;if(g[S=v[x]]){u=a[S];n[S]=u}}}}}}(o,n,y,p)),w.style=y,function(t,e,i){var o=e.style;if(!t.isGroup&&o){if(i){t.useStyle({});for(var r=t.animators,n=0;n<r.length;n++){var a=r[n];"style"===a.targetName&&a.changeTarget(t.style)}}t.setStyle(o)}e&&(e.style=null,e&&t.attr(e),e.style=o)}(o,w,g),function(e,i){t(i,"silent")&&(e.silent=i.silent),t(i,"ignore")&&(e.ignore=i.ignore),e instanceof l&&t(i,"invisible")&&(e.invisible=i.invisible);e instanceof s&&t(i,"autoBatch")&&(e.autoBatch=i.autoBatch)}(o,n),v)if(h){var B={};e(W,(function(t){var e=t?n[t]:n;e&&e.enterFrom&&(t&&(B[t]=B[t]||{}),a(t?B[t]:B,e.enterFrom))}));var b=O("enter",o,n,d,u);b.duration>0&&o.animateFrom(B,b)}else!function(t,e,i,o,r){if(r){var n=O("update",t,e,o,i);n.duration>0&&t.animateFrom(r,n)}}(o,n,u||0,d,p);F(o,n),y?o.dirty():o.markRedraw()}function F(t,e){for(var i=C(t).leaveToProps,o=0;o<W.length;o++){var r=W[o],n=r?e[r]:e;n&&n.leaveTo&&(i||(i=C(t).leaveToProps={}),r&&(i[r]=i[r]||{}),a(r?i[r]:i,n.leaveTo))}}function P(t,e,i,o){if(t){var r=t.parent,n=C(t).leaveToProps;if(n){var a=O("update",t,e,i,0);a.done=function(){r.remove(t),o&&o()},t.animateTo(n,a)}else r.remove(t),o&&o()}}function A(t){return"all"===t}var T={},X={setTransform:function(t,e){return T.el[t]=e,this},getTransform:function(t){return T.el[t]},setShape:function(t,e){var i=T.el;return(i.shape||(i.shape={}))[t]=e,i.dirtyShape&&i.dirtyShape(),this},getShape:function(t){var e=T.el.shape;if(e)return e[t]},setStyle:function(t,e){var i=T.el,o=i.style;return o&&(o[t]=e,i.dirtyStyle&&i.dirtyStyle()),this},getStyle:function(t){var e=T.el.style;if(e)return e[t]},setExtra:function(t,e){return(T.el.extra||(T.el.extra={}))[t]=e,this},getExtra:function(t){var e=T.el.extra;if(e)return e[t]}};function Y(){var t=this,e=t.el;if(e){var i=C(e).userDuring,o=t.userDuring;i===o?(T.el=e,o(X)):t.el=t.userDuring=null}}function R(t,e,o,r){var n=o[t];if(n){var l,s=e[t];if(s){var d=o.transition,x=n.transition;if(x)if(!l&&(l=r[t]={}),A(x))a(l,s);else for(var u=c(x),h=0;h<u.length;h++){var g=s[S=u[h]];l[S]=g}else if(A(d)||f(d,t)>=0){!l&&(l=r[t]={});var v=i(s);for(h=0;h<v.length;h++){var S;g=s[S=v[h]];H(n[S],g)&&(l[S]=g)}}}}}function D(t,e,o){var r=e[t];if(r)for(var n=o[t]={},a=i(r),l=0;l<a.length;l++){var s=a[l];n[s]=d(r[s])}}function H(t,e){return x(t)?t!==e:null!=t&&isFinite(t)}var z=n(),E=["percent","easing","shape","style","extra"];function L(t){t.stopAnimation("keyframe"),t.attr(z(t))}function V(t,o,r){if(r.isAnimationEnabled()&&o)if(g(o))e(o,(function(e){V(t,e,r)}));else{var n=o.keyframes,a=o.duration;if(r&&null==a){var l=u("enter",r,0);a=l&&l.duration}if(n&&a){var s=z(t);e(W,(function(r){var l;r&&!t[r]||(n.sort((function(t,e){return t.percent-e.percent})),e(n,(function(n){var d=t.animators,x=r?n[r]:n;if(x){var u=i(x);if(r||(u=v(u,(function(t){return f(E,t)<0}))),u.length){l||((l=t.animate(r,o.loop,!0)).scope="keyframe");for(var h=0;h<d.length;h++)d[h]!==l&&d[h].targetName===l.targetName&&d[h].stopTracks(u);r&&(s[r]=s[r]||{});var c=r?s[r]:s;e(u,(function(e){c[e]=((r?t[r]:t)||{})[e]})),l.whenWithKeys(a*n.percent,x,u,n.easing)}}})),l&&l.delay(o.delay||0).duration(a).start(o.easing))}))}}}export{P as a,y as b,w as c,b as d,V as e,A as f,S as i,L as s,F as u};
